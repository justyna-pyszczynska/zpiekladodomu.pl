<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>O nas - Z Piekła do Domu</title>
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://zpiekladodomu.pl/onas.html">
  <meta property="og:title" content="O nas - Z Piekła do Domu">
  <meta property="og:description" content="Poznaj naszą misję, zespół i dowiedz się, jak ratujemy psy i koty z Turcji, aby znalazły kochające domy w Polsce.">
  <meta property="og:image" content="https://zpiekladodomu.pl/images/logo-big.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:locale" content="pl_PL">
  <meta property="og:site_name" content="Z Piekła do Domu">
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://zpiekladodomu.pl/onas.html">
  <meta name="twitter:title" content="O nas - Z Piekła do Domu">
  <meta name="twitter:description" content="Poznaj naszą misję, zespół i dowiedz się, jak ratujemy psy i koty z Turcji, aby znalazły kochające domy w Polsce.">
  <meta name="twitter:image" content="https://zpiekladodomu.pl/images/logo-big.png">
  
  <link rel="icon" type="image/svg+xml" href="images/logo.svg">
  <link href="https://fonts.googleapis.com/css2?family=McLaren&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Poppins', sans-serif; background: #fafafa; color: #222; }
    img { display: block; max-width: 100%; }

    /* CONTAINERS */
    .container { width: min(1200px, 100%); margin: 0 auto; }

    /* NAVBAR */
    header {
      position: fixed;
      top: 16px;
      left: 50%;
      transform: translateX(-50%);
      width: min(1200px, 92%);
      z-index: 10;
    }
    .navbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 20px;
      background: rgba(255,255,255,0.7);
      border-radius: 14px;
      backdrop-filter: blur(8px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.12);
      min-height: 52px;
    }
    .brand {
      display: flex; align-items: center; gap: 10px; font-weight: 600; font-family: 'McLaren', cursive; font-size: 1rem;
    }
    .brand img { width: 28px; height: 28px; }
    .menu { display: flex; align-items: center; gap: 14px; }
    .menu a {
      text-decoration: none;
      color: #222; 
      font-weight: 500;
      padding: 8px 12px; 
      border-radius: 10px; 
      transition: all 0.3s ease;
    }
    .menu a:hover {
      background: rgba(0,0,0,0.05);
      color: #374151;
    }
    .menu a.cta { 
      background: linear-gradient(135deg,#ffedd5,#fecaca); 
      font-weight: 700; 
      transition: all 0.3s ease;
    }
    .menu a.cta:hover {
      background: linear-gradient(135deg,#fbbf24,#f87171);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(251,191,36,0.4);
    }

    /* Dropdown Menu */
    .dropdown {
      position: relative;
      display: inline-block;
    }
    
    .dropdown-toggle {
      cursor: pointer;
    }
    
    .dropdown-menu {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      background: rgba(255,255,255,0.95);
      backdrop-filter: blur(8px);
      border-radius: 10px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
      min-width: 180px;
      padding: 8px 0;
      margin-top: 8px;
      z-index: 1000;
    }
    
    .dropdown:hover .dropdown-toggle {
      background: linear-gradient(135deg,#ffedd5,#fecaca);
    }
    
    .dropdown:hover .dropdown-menu {
      display: block;
      background: linear-gradient(135deg,#ffedd5,#fecaca);
    }
    
    .dropdown-menu a {
      display: block;
      padding: 8px 16px;
      color: #222;
      text-decoration: none;
      transition: all 0.3s ease;
      border-radius: 0;
      position: relative;
    }
    
    .dropdown-menu a:not(:last-child)::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 16px;
      right: 16px;
      height: 1px;
      background: rgba(0, 0, 0, 0.1);
    }
    
    .dropdown-menu a:hover {
      background: rgba(255,255,255,0.3);
      color: #1f2937;
      font-weight: 600;
    }
    
    .dropdown-menu a.ustawa-link {
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      line-height: 1.4;
    }
    
    .dropdown-menu a.ustawa-link img {
      width: 18px;
      height: 18px;
      flex-shrink: 0;
      margin-top: -2px;
      display: block;
    }
    
    /* Mobile Menu Toggle Button */
    .mobile-menu-toggle {
      display: none;
      flex-direction: column;
      background: none;
      border: none;
      cursor: pointer;
      padding: 8px;
      gap: 4px;
    }
    
    .hamburger-line {
      width: 25px;
      height: 3px;
      background: #222;
      border-radius: 2px;
      transition: all 0.3s ease;
    }
    
    .mobile-menu-toggle.active .hamburger-line:nth-child(1) {
      transform: rotate(-45deg) translate(-5px, 6px);
    }
    
    .mobile-menu-toggle.active .hamburger-line:nth-child(2) {
      opacity: 0;
    }
    
    .mobile-menu-toggle.active .hamburger-line:nth-child(3) {
      transform: rotate(45deg) translate(-5px, -6px);
    }
    
    /* Mobile Menu Overlay */
    .mobile-menu {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      z-index: 1000;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 1.5rem;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      padding: 0 1rem;
    }
    
    .mobile-menu.active {
      display: flex;
      opacity: 1;
      visibility: visible;
    }
    
    .mobile-menu a {
      font-size: 1.25rem;
      font-weight: 600;
      text-decoration: none;
      color: #222;
      padding: 0.75rem 1.5rem;
      border-radius: 15px;
      transition: all 0.3s ease;
      width: 100%;
      max-width: 400px;
      text-align: center;
    }
    
    .mobile-menu a:hover {
      background: rgba(0,0,0,0.1);
      transform: scale(1.05);
    }
    
    .mobile-menu a.cta {
      background: linear-gradient(135deg,#ffedd5,#fecaca);
      font-weight: 700;
    }
    
    .mobile-menu a.cta:hover {
      background: linear-gradient(135deg,#fbbf24,#f87171);
      transform: scale(1.02);
    }
    
    /* Mobile Teksty Dropdown - Horizontal layout */
    .mobile-teksty-dropdown {
      display: flex;
      flex-direction: row;
      gap: 0.35rem;
      background: linear-gradient(135deg,#ffedd5,#fecaca);
      border-radius: 15px;
      padding: 0.6rem 0.5rem;
      justify-content: center;
      align-items: center;
      flex-wrap: nowrap;
      width: 100%;
      max-width: 400px;
    }
    
    .mobile-dropdown-item {
      font-size: 0.75rem !important;
      font-weight: 600;
      text-decoration: none;
      color: #222;
      padding: 0.4rem 0.5rem !important;
      border-radius: 8px;
      transition: all 0.3s ease;
      white-space: nowrap;
      flex: 1;
      text-align: center;
    }
    
    .mobile-dropdown-item:hover {
      background: rgba(255,255,255,0.4);
      transform: scale(1.02);
    }
    
    /* Mobile Menu Close Button */
    .mobile-menu-close {
      position: absolute;
      top: 1.5rem;
      right: 1.5rem;
      background: none;
      border: none;
      font-size: 3rem;
      line-height: 1;
      color: #222;
      cursor: pointer;
      padding: 0;
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.3s ease;
    }
    
    .mobile-menu-close:hover {
      background: rgba(0,0,0,0.1);
      transform: rotate(90deg);
    }
    
    .mobile-menu a.cta:hover {
      background: linear-gradient(135deg,#fbbf24,#f87171);
      transform: scale(1.05);
    }

    /* HERO */
    .hero {
      position: relative;
      min-height: 120vh;
      background: url('images/onas.jpg') center 30%/cover no-repeat;
      display: flex; 
      align-items: center;
      width: 100%;
    }
    .hero::after { 
      content:""; 
      position:absolute; 
      inset:0; 
      background: linear-gradient(180deg, rgba(0,0,0,0.1), rgba(0,0,0,0.05) 40%, rgba(0,0,0,0.02)); 
    }
    .hero-content { 
      position: relative; 
      z-index: 1; 
      width: min(500px, 50%); 
      margin-left: 12%; 
      color: #fff; 
    }
    .hero h1 { 
      font-family: 'McLaren', cursive; 
      font-size: clamp(52px, 8vw, 62px); 
      line-height: 1.2; 
      font-weight: 450;
      text-shadow: 2px 3px 12px rgba(0,0,0,.7);
      padding-top: 10rem;
      border-radius: 0.5rem;
      display: inline-block;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    }
    .hero-subtitle {
      font-family: 'McLaren', cursive;
      font-size: clamp(18px, 3vw, 24px);
      line-height: 1.3;
      font-weight: 450;
      color: #fff;
      text-shadow: 2px 3px 12px rgba(0,0,0,.7);
      padding: 1rem 1.5rem;
      border-radius: 0.5rem;
      display: inline-block;
      white-space: nowrap;
      position: absolute;
      top: 75%;
      left: 12%;
      z-index: 2;
    }
      .hero-button-left {
        position: absolute;
        top: 77%;
        right: 25%;
        z-index: 2;
        width: 180px;
        height: 44px;
        font-family: 'McLaren', cursive;
        text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      }
      .hero-button {
        position: absolute;
        top: 77%;
        right: 12%;
        z-index: 2;
        width: 180px;
        height: 44px;
      }
    .btn-ghost { background: rgba(255,255,255,.2); color:#fff; border:1px solid rgba(255,255,255,.35); text-shadow: 1px 1px 2px rgba(0,0,0,0.8); }
    .btn-outline { 
      background: transparent; 
      color: #fff; 
      border: 2px solid #fff; 
      font-family: 'McLaren', cursive;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
      transition: all 0.3s ease;
    }
    .btn-outline:hover {
      background: rgba(255,255,255,0.1);
      border-color: #fca5a5;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    /* HERO ARROW BUTTONS */
    .hero-arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 3;
    }
    .hero-arrow:hover {
      transform: translateY(-50%) scale(1.2);
    }
    .hero-arrow-left {
      left: 12%;
    }
    .hero-arrow-right {
      right: 12%;
    }
    .hero-arrow img {
      width: 48px;
      height: 48px;
      opacity: 0.7;
      transition: opacity 0.3s ease;
    }
    .hero-arrow:hover img {
      opacity: 1;
    }

    /* BIG CARD SECTION */
    .section { padding: 3rem 0; }
    .overlap { margin-top: -39.5vh; position: relative; z-index: 2; }
    .big-card-container { 
      display: flex; 
      flex-direction: column;
      align-items: center;
      width: min(1200px, 100%);
      margin: 0 auto;
    }
    .big-card { 
      background: #fff; 
      border-radius: 1.5rem; 
      box-shadow: 0 20px 40px rgba(0,0,0,.15); 
      overflow: hidden; 
      width: 100%;
      height: 700px;
      display: flex;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .big-card:hover { 
      transform: translateY(-8px); 
      box-shadow: 0 30px 60px rgba(0,0,0,.2); 
    }
    .big-card-image {
      flex: 1;
      background: url('images/logo.svg') 60% center no-repeat;
      background-size: 75%;
      background-color: #ffffff;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding-right: 10%;
    }
    .big-card-content {
      flex: 1;
      padding: 2.5rem 3rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: 1.5rem;
    }
    .big-card h2 {
      font-family: 'McLaren', cursive;
      font-size: clamp(2rem, 2.5vw, 2.5rem);
      color: #1f2937;
      margin: 0;
      line-height: 1.2;
    }
    .big-card .muted {
      color: #6b7280;
      font-size: 1rem;
      line-height: 1.5;
      margin: 0;
    }
    .big-card .muted .ustawa-link {
      color: #000 !important;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      transition: opacity 0.2s ease;
      position: relative;
      top: 2px;
    }
    .big-card .muted .ustawa-link:hover {
      opacity: 0.8;
    }
    .big-card .muted .ustawa-link img {
      width: 14px;
      height: 14px;
      vertical-align: middle;
      flex-shrink: 0;
    }
    .big-card .btn {
      align-self: flex-start;
      padding: 1rem 2rem;
      font-size: 1.125rem;
    }
    .muted { color: #6b7280; font-size: 0.875rem; line-height: 1.5; }
    .btn { display:inline-flex; align-items:center; gap:.5rem; padding: .6875rem 1.125rem; border:none; border-radius: 9999px; cursor:pointer; font-weight: 700; font-family: 'McLaren', cursive; }
    .btn-primary { 
      background: linear-gradient(135deg,#fca5a5,#fde68a); 
      color:#fff; 
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
      transition: all 0.3s ease;
    }
    .btn-primary:hover {
      background: linear-gradient(135deg,#f87171,#fbbf24);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(252,165,165,0.4);
    }
    .center { text-align: center; }

    /* MAP SECTION */
    .map-section { padding: 2rem 0; }
    #map-title-new { 
      text-align: center; 
      margin-bottom: 2.5rem; 
      font-family: 'McLaren', cursive; 
      font-size: 2rem; 
      color: #1f2937; 
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
      margin-top: 0;
    }
    .map-container { 
      display: flex;
      flex-direction: row;
      gap: 3rem; 
      align-items: flex-start; 
      margin: 1rem auto; 
      max-width: 1200px;
      width: 100%;
      padding: 0 2rem;
    }
   .map-wrapper { 
      background: none; 
      padding: 0; 
      position: relative;
      flex: 1;
      max-width: 700px;
      margin: 0 auto;
     overflow: visible;
      display: flex;
      flex-direction: column;
      align-items: center;
      align-self: flex-start;
    }
    
    #turkeyMapContainer {
      position: relative;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 400px;
      padding-top: 60;
    }
    .turkey-map { 
      width: 100%;
      height: auto;
      max-height: 600px;
      border: none;
      outline: none;
    }
    
    /* Enhanced interactive map styles */
    .map-wrapper object {
      width: 100%;
      height: auto;
      max-width: 800px;
      max-height: 500px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      display: block;
      margin: 0 auto;
      border: 3px solid #007bff;
      background-color: #f8f9fa;
    }
    
    /* SVG-specific styles for precise hover targeting */
    .map-wrapper object svg {
      width: 100%;
      height: auto;
    }
    
    .map-wrapper object svg path,
    .map-wrapper object svg circle {
      transition: all 0.3s ease;
    }
    
       /* Province hover effects - only for actual shapes */
       .province {
         cursor: pointer;
         transition: all 0.3s ease;
         pointer-events: all;
         fill: #f0f0f0 !important;
         stroke: #ffffff !important;
         stroke-width: 1 !important;
       }

       .province:hover {
         fill: #c59d61 !important;
         stroke: #ffffff !important;
         stroke-width: 4 !important;
         opacity: 1 !important;
         filter: drop-shadow(0 4px 8px #c59d61) !important;
         transform: scale(1.05);
         transform-origin: center;
       }

       .province.selected {
         fill: #c59d61 !important;
         stroke: #ffffff !important;
         stroke-width: 5 !important;
         filter: drop-shadow(0 6px 12px #c59d61) !important;
         opacity: 1 !important;
         transform: scale(1.1);
         transform-origin: center;
       }
    
    /* Enable pointer events so hover/click work on embedded SVG */
    .map-wrapper object { pointer-events: auto; }
    .map-wrapper object svg { pointer-events: auto; }
    .map-wrapper object svg * { pointer-events: auto; }
    
    /* Additional CSS injection for SVG hover effects */
    .map-wrapper object svg path.province,
    .map-wrapper object svg circle.province {
      cursor: pointer !important;
      transition: all 0.3s ease !important;
      fill: #e5e7eb !important;
      stroke: #c59d61 !important;
      stroke-width: 0.8 !important;
    }
    
    .map-wrapper object svg path.province:hover,
    .map-wrapper object svg circle.province:hover {
      fill: #c59d61 !important;
      stroke: #c59d61 !important;
      stroke-width: 3 !important;
      opacity: 1 !important;
      filter: drop-shadow(0 4px 8px #c59d61) !important;
    }
    
    .map-info { 
      background: white; 
      border-radius: 1rem; 
      padding: 1.5rem; 
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      flex: 0 0 320px;
      max-width: 320px;
    }
    .map-info h4 { font-family: 'McLaren', cursive; font-size: 1.5rem; color: #1f2937; margin: 0 0 0.5rem 0; }
    .map-info p { color: #6b7280; margin: 0 0 1.25rem 0; line-height: 1.4; }
    .map-stats { display: flex; gap: 2rem; }
    .stat-item { text-align: center; }
    .stat-number { display: block; font-family: 'McLaren', cursive; font-size: 2rem; font-weight: bold; color: #ef4444; }
    .stat-label { display: block; font-size: 0.875rem; color: #6b7280; margin-top: 0.5rem; }

        /* Pin Tooltip Styles */
        .pin-tooltip {
          position: absolute;
          background: white;
          border-radius: 5px;
          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
          padding: 6px 10px;
          font-size: 9.5px;
          z-index: 1000;
          pointer-events: none;
          opacity: 0;
          transform: translateY(6px);
          transition: all 0.3s ease;
          min-width: 200px;
          max-width: 280px;
          white-space: normal;
          overflow-wrap: anywhere;
          hyphens: auto;
        }
    
    .pin-tooltip.show {
      opacity: 1;
      transform: translateY(0);
    }
    
        .pin-tooltip::after {
          content: '';
          position: absolute;
          top: 100%;
          left: 50%;
          margin-left: -6px;
          border-width: 6px;
          border-style: solid;
          border-color: white transparent transparent transparent;
        }
        .pin-tooltip.istanbul-tooltip::after {
          top: -6px;
          border-color: transparent transparent white transparent;
        }
    
        .pin-tooltip-header {
          font-family: 'McLaren', cursive;
          font-size: 12px;
          font-weight: 600;
          color: #000;
          margin: 0 0 3px 0;
        }
        
        .pin-tooltip-description {
          color: #6b7280;
          font-size: 10px;
          line-height: 1.35;
          margin: 0;
        }

    /* GALLERY SECTION */
    .gallery-section { padding: 2.0rem 0; background: #f8fafc; }
    .gallery-section-no-padding {background: #f8fafc; }
    .final-gallery-section { margin-top: -2rem; }
    .gallery-header { text-align: center; margin-bottom: 3rem; }
    .gallery-header h3 { font-family: 'McLaren', cursive; font-size: 2rem; color: #1f2937; margin-bottom: 1rem; }
    .gallery-header p { color: #6b7280; font-size: 1.125rem; }
    .gallery-grid { 
      display: grid; 
      grid-template-columns: 1fr 1fr 1fr; 
      grid-template-rows: 1fr 1fr;
      gap: 2rem; 
      margin-top: 2rem; 
      width: min(1200px, 100%) !important;
      margin-left: auto !important;
      margin-right: auto !important;
      height: 600px;
    }
    .gallery-item.featured {
      grid-row: span 2;
      cursor: pointer;
    }
    .gallery-item.featured img, .gallery-item.featured video { 
      width: 100%; 
      height: 100%; 
      object-fit: cover; 
      border-radius: 1rem; 
      min-height: 476px;
    }
    .facebook-video-embed {
      width: 100%;
      height: 100%;
      min-height: 476px;
      position: relative;
      align-items: center;
      justify-content: center;
    }
    .facebook-video-embed iframe {
      width: 100% !important;
      height: 100% !important;
      min-height: 476px !important;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .facebook-photo-container {
      position: relative;
      width: 100%;
      height: 100%;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .facebook-photo-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* object-position will be set by individual photo rules below */
      transition: transform 0.3s ease;
    }
    .facebook-photo-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.4);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .facebook-icon {
      background: #1877f2;
      color: white;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: bold;
      font-family: Arial, sans-serif;
      margin-bottom: 10px;
    }
    .facebook-text {
      color: white;
      font-size: 14px;
      font-weight: 500;
      text-align: center;
    }
    .gallery-item.facebook-photo {
      cursor: default;
    }
    .gallery-item { 
      background: white; 
      border-radius: 1rem; 
      overflow: hidden; 
      box-shadow: 0 4px 6px rgba(0,0,0,0.1); 
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .gallery-item:hover { 
      transform: translateY(-4px); 
      box-shadow: 0 8px 25px rgba(0,0,0,0.15); 
    }
    .gallery-item img, .gallery-item video { 
      width: 100%; 
      height: 350px; 
      object-fit: cover; 
    }
    .gallery-item.video { position: relative;}
    
    /* Additional cards styling */
    .gallery-item.image-card {
      height: 300px;
    }
    
    .gallery-item.image-card.featured-image {
      grid-column: 1 / -1;
      justify-self: center;
      width: 400px;
      height: 400px;
    }
    
    .gallery-item.image-card.large-card {
      height: 400px;
    }
    
    .gallery-item.video-card {
      height: 300px;
      cursor: pointer;
    }
    
    .gallery-item.video-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }
    
    .gallery-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* object-position will be set by individual photo rules below */
      border-radius: 1rem;
      display: block;
    }
    /* Hide alt text when image is not loaded or has opacity 0 */
    .gallery-image:not([src]),
    .gallery-image[src=""],
    .image-container img:not([src]),
    .image-container img[src=""] {
      display: none !important;
    }
    /* Hide alt text on images with opacity 0 - use font-size 0 trick */
    .gallery-image[style*="opacity: 0"],
    .image-container img[style*="opacity: 0"] {
      font-size: 0 !important;
      line-height: 0 !important;
      color: transparent !important;
    }
    /* Ensure alt text never shows by using negative text-indent */
    .gallery-image,
    .image-container img {
      text-indent: -9999px;
      overflow: hidden;
    }
    
    /* Better positioning for main gallery photos */
    .gallery-grid .facebook-photo-container img,
    .gallery-grid .gallery-item .gallery-image {
      object-fit: cover;
      /* object-position will be set by individual photo rules below */
    }
    
    /* Three-card gallery positioning */
    .gallery-grid-three-cards .gallery-image {
      object-fit: cover;
      /* object-position will be set by individual photo rules below */
    }
    
    /* Five-card gallery - adjust each card */
    .gallery-grid-five-cards .gallery-item .gallery-image {
      object-fit: cover;
      /* object-position will be set by individual photo rules below */
    }
    
    /* Individual photo positioning - target each image by filename with high specificity */
    /* Target all img elements regardless of class - ensures consistency across all galleries */
    img[src*="dog-4.jpg"],
    .facebook-photo-img[src*="dog-4.jpg"],
    .gallery-image[src*="dog-4.jpg"],
    .gallery-item img[src*="dog-4.jpg"],
    .facebook-photo-container img[src*="dog-4.jpg"],
    .image-container img[src*="dog-4.jpg"] { object-position: center 50% !important; }
    img[src*="dog-5.jpg"],
    .facebook-photo-img[src*="dog-5.jpg"],
    .gallery-image[src*="dog-5.jpg"],
    .gallery-item img[src*="dog-5.jpg"],
    .facebook-photo-container img[src*="dog-5.jpg"],
    .image-container img[src*="dog-5.jpg"] { object-position: center 55% !important; }
    img[src*="dog-6.jpg"],
    .facebook-photo-img[src*="dog-6.jpg"],
    .gallery-image[src*="dog-6.jpg"],
    .gallery-item img[src*="dog-6.jpg"],
    .facebook-photo-container img[src*="dog-6.jpg"],
    .image-container img[src*="dog-6.jpg"] { object-position: center 45% !important; }
    img[src*="dog-7.jpg"],
    .facebook-photo-img[src*="dog-7.jpg"],
    .gallery-image[src*="dog-7.jpg"],
    .gallery-item img[src*="dog-7.jpg"],
    .facebook-photo-container img[src*="dog-7.jpg"],
    .image-container img[src*="dog-7.jpg"] { object-position: center 50% !important; }
    img[src*="dog-8.jpg"],
    .facebook-photo-img[src*="dog-8.jpg"],
    .gallery-image[src*="dog-8.jpg"],
    .gallery-item img[src*="dog-8.jpg"],
    .facebook-photo-container img[src*="dog-8.jpg"],
    .image-container img[src*="dog-8.jpg"] { object-position: center 70% !important; }
    img[src*="dog-9.jpg"],
    .facebook-photo-img[src*="dog-9.jpg"],
    .gallery-image[src*="dog-9.jpg"],
    .gallery-item img[src*="dog-9.jpg"],
    .facebook-photo-container img[src*="dog-9.jpg"],
    .image-container img[src*="dog-9.jpg"] { object-position: center 55% !important; }
    img[src*="dog-10.jpg"],
    .facebook-photo-img[src*="dog-10.jpg"],
    .gallery-image[src*="dog-10.jpg"],
    .gallery-item img[src*="dog-10.jpg"],
    .facebook-photo-container img[src*="dog-10.jpg"],
    .image-container img[src*="dog-10.jpg"] { object-position: center 50% !important; }
    img[src*="dog-11.jpg"],
    .facebook-photo-img[src*="dog-11.jpg"],
    .gallery-image[src*="dog-11.jpg"],
    .gallery-item img[src*="dog-11.jpg"],
    .facebook-photo-container img[src*="dog-11.jpg"],
    .image-container img[src*="dog-11.jpg"] { object-position: center 80% !important; }
    img[src*="dog-12.jpg"],
    .facebook-photo-img[src*="dog-12.jpg"],
    .gallery-image[src*="dog-12.jpg"],
    .gallery-item img[src*="dog-12.jpg"],
    .facebook-photo-container img[src*="dog-12.jpg"],
    .image-container img[src*="dog-12.jpg"] { object-position: center 75% !important; }
    img[src*="dog-15.jpg"],
    .facebook-photo-img[src*="dog-15.jpg"],
    .gallery-image[src*="dog-15.jpg"],
    .gallery-item img[src*="dog-15.jpg"],
    .facebook-photo-container img[src*="dog-15.jpg"],
    .image-container img[src*="dog-15.jpg"] { object-position: center 55% !important; }
    img[src*="dog-16.jpg"],
    .facebook-photo-img[src*="dog-16.jpg"],
    .gallery-image[src*="dog-16.jpg"],
    .gallery-item img[src*="dog-16.jpg"],
    .facebook-photo-container img[src*="dog-16.jpg"],
    .image-container img[src*="dog-16.jpg"] { object-position: center 50% !important; }
    img[src*="dog-17.jpg"],
    .facebook-photo-img[src*="dog-17.jpg"],
    .gallery-image[src*="dog-17.jpg"],
    .gallery-item img[src*="dog-17.jpg"],
    .facebook-photo-container img[src*="dog-17.jpg"],
    .image-container img[src*="dog-17.jpg"] { object-position: center 50% !important; }
    img[src*="bbb2.jpg"],
    .facebook-photo-img[src*="bbb2.jpg"],
    .gallery-image[src*="bbb2.jpg"],
    .gallery-item img[src*="bbb2.jpg"],
    .facebook-photo-container img[src*="bbb2.jpg"],
    .image-container img[src*="bbb2.jpg"] { object-position: center 70% !important; }
    img[src*="ustawa3.jpg"],
    .facebook-photo-img[src*="ustawa3.jpg"],
    .gallery-image[src*="ustawa3.jpg"],
    .gallery-item img[src*="ustawa3.jpg"],
    .facebook-photo-container img[src*="ustawa3.jpg"],
    .image-container img[src*="ustawa3.jpg"] { object-position: center 70% !important; }
    img[src*="patka3.jpg"],
    .facebook-photo-img[src*="patka3.jpg"],
    .gallery-image[src*="patka3.jpg"],
    .gallery-item img[src*="patka3.jpg"],
    .facebook-photo-container img[src*="patka3.jpg"],
    .image-container img[src*="patka3.jpg"] { object-position: center 55% !important; }
    img[src*="piorun1.jpg"],
    .facebook-photo-img[src*="piorun1.jpg"],
    .gallery-image[src*="piorun1.jpg"],
    .gallery-item img[src*="piorun1.jpg"],
    .facebook-photo-container img[src*="piorun1.jpg"],
    .image-container img[src*="piorun1.jpg"] { object-position: center 70% !important; }
    img[src*="insta-post3.jpg"],
    .facebook-photo-img[src*="insta-post3.jpg"],
    .gallery-image[src*="insta-post3.jpg"],
    .gallery-item img[src*="insta-post3.jpg"],
    .facebook-photo-container img[src*="insta-post3.jpg"],
    .image-container img[src*="insta-post3.jpg"] { object-position: center 70% !important; }
    img[src*="cat1.jpg"],
    .facebook-photo-img[src*="cat1.jpg"],
    .gallery-image[src*="cat1.jpg"],
    .gallery-item img[src*="cat1.jpg"],
    .facebook-photo-container img[src*="cat1.jpg"],
    .image-container img[src*="cat1.jpg"] { object-position: center 55% !important; }
    img[src*="tygrysek8.jpg"],
    .facebook-photo-img[src*="tygrysek8.jpg"],
    .gallery-image[src*="tygrysek8.jpg"],
    .gallery-item img[src*="tygrysek8.jpg"],
    .facebook-photo-container img[src*="tygrysek8.jpg"],
    .image-container img[src*="tygrysek8.jpg"] { object-position: center 75% !important; }
    
    /* Also target background images */
    .image-container[style*="dog-4.jpg"] {
      background-position: center 35% !important;
    }
    .image-container[style*="dog-5.jpg"] {
      background-position: center 40% !important;
    }
    .image-container[style*="dog-6.jpg"] {
      background-position: center 25% !important;
    }
    .image-container[style*="dog-7.jpg"] {
      background-position: center 30% !important;
    }
    .image-container[style*="dog-8.jpg"] {
      background-position: center 60% !important;
    }
    .image-container[style*="dog-9.jpg"] {
      background-position: center 40% !important;
    }
    .image-container[style*="dog-10.jpg"] {
      background-position: center 30% !important;
    }
    .image-container[style*="dog-11.jpg"] {
      background-position: center 75% !important;
    }
    .image-container[style*="dog-12.jpg"] {
      background-position: center 70% !important;
    }
    .image-container[style*="tygrysek8.jpg"] {
      background-position: center 70% !important;
    }
    .image-container[style*="dog-15.jpg"] {
      background-position: center 40% !important;
    }
    .image-container[style*="dog-16.jpg"] {
      background-position: center 35% !important;
    }
    .image-container[style*="dog-17.jpg"] {
      background-position: center 30% !important;
    }
    .image-container[style*="bbb2.jpg"] {
      background-position: center 60% !important;
    }
    .image-container[style*="ustawa3.jpg"] {
      background-position: center 60% !important;
    }
    .image-container[style*="patka3.jpg"] {
      background-position: center 40% !important;
    }
    .image-container[style*="piorun1.jpg"] {
      background-position: center 60% !important;
    }
    .image-container[style*="insta-post3.jpg"] {
      background-position: center 60% !important;
    }
    .image-container[style*="cat1.jpg"] {
      background-position: center 40% !important;
    }
    
    .image-container {
      width: 100%;
      height: 100%;
      overflow: hidden;
      border-radius: 1rem;
    }
    
    /* Sensitive content overlay */
    .sensitive-content {
      position: relative;
      cursor: pointer;
    }
    
    .sensitive-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 1rem;
      transition: opacity 0.3s ease;
    }
    
    .sensitive-content.revealed .sensitive-overlay {
      opacity: 0 !important;
      pointer-events: none !important;
      display: none !important;
    }
    
    .visibility-icon-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
      z-index: 10;
    }
    
    .visibility-icon {
      width: 20px !important;
      height: 20px !important;
      background-image: url('images/visibility-icon.svg');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      filter: brightness(0) invert(1);
      transition: transform 0.3s ease;
      display: block;
      flex-shrink: 0;
    }
    
    .sensitive-content:hover .visibility-icon {
      transform: scale(1.05);
    }
    
    .sensitive-text {
      color: white;
      font-size: 0.875rem;
      font-weight: 500;
      text-align: center;
    }

    /* Facebook Widget Section */
    .facebook-widget-section {
      background: #f8fafc;
      padding: 2rem 0;
    }

    .social-widgets-container {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 2rem;
      width: 100%;
      max-width: 1400px;
      margin: 0 auto;
      align-items: start;
    }

    .facebook-widget-container,
    .instagram-widget-container,
    .tiktok-widget-container {
      text-align: center;
    }

    .tiktok-widget-container {
      text-align: center;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .facebook-widget-header h2,
    .instagram-widget-header h2,
    .tiktok-widget-header h2 {
      font-size: 1.1rem;
      color: #1f2937;
      margin-bottom: 0.25rem;
    }

    .facebook-widget-header p,
    .instagram-widget-header p,
    .tiktok-widget-header p {
      color: #6b7280;
      font-size: 0.8rem;
      margin-bottom: 0.75rem;
    }

    /* Facebook Widget Link */
    .fb-widget-link {
      display: block;
      text-decoration: none;
      color: inherit;
      width: 100%;
      cursor: pointer;
    }

    /* Facebook Widget */
    .fb-widget {
      background: #18191a;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      width: 100%;
      height: 480px;
      max-width: 100%;
      margin: 0 auto;
      position: relative;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .fb-widget-link:hover .fb-widget {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    /* Facebook Cover/Banner */
    .fb-cover-container {
      width: 100%;
      height: 200px;
      overflow: hidden;
      position: relative;
      background: #18191a;
    }

    .fb-cover-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    /* Facebook Profile Section */
    .fb-profile-section {
      padding: 60px 20px 20px 20px;
      background: #18191a;
      position: relative;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    /* Profile Picture */
    .fb-profile-picture {
      position: absolute;
      top: -45px;
      left: 20px;
      width: 100px;
      height: 100px;
      border-radius: 50%;
      border: 4px solid #18191a;
      background: #ffffff;
      overflow: hidden;
      padding: 4px;
      box-sizing: border-box;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .fb-avatar {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
      transform: scale(1.15);
      position: relative;
      left: 1px;
    }

    /* Page Info Section */
    .fb-info-section {
      margin-top: 10px;
    }

    .fb-page-name {
      color: #e4e6eb;
      font-size: 0.7rem;
      font-weight: 600;
      margin-bottom: 0;
      line-height: 1.3;
      white-space: normal;
      position: absolute;
      top: -10px;
      left: 132px;
      max-width: calc(100% - 152px);
      text-align: left;
    }

    /* Facebook Buttons */
    .fb-buttons {
      display: flex;
      gap: 8px;
      margin-top: -8px;
    }

    .fb-btn-like,
    .fb-btn-message {
      flex: 1;
      padding: 5px 8px;
      border-radius: 6px;
      font-size: 0.625rem;
      font-weight: 600;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
      transition: all 0.2s ease;
      pointer-events: none;
      white-space: nowrap;
    }

    .fb-btn-icon {
      width: 12px;
      height: 12px;
      display: inline-block;
      flex-shrink: 0;
    }

    .fb-btn-like {
      background: #3a3b3c;
      color: #e4e6eb;
    }

    .fb-btn-message {
      background: #2374e1;
      color: #ffffff;
    }

    .fb-widget-link:hover .fb-btn-like {
      background: #404244;
    }

    .fb-widget-link:hover .fb-btn-message {
      background: #1877f2;
    }

    /* Description Text */
    .fb-description-title {
      color: #e4e6eb;
      font-size: 0.7rem;
      font-weight: 600;
      margin-top: 12px;
      margin-bottom: 8px;
      line-height: 1.3;
      text-align: left;
    }

    .fb-description-text {
      color: #b0b3b8;
      font-size: 0.6rem;
      font-weight: 400;
      margin-top: 0;
      margin-bottom: 16px;
      line-height: 1.4;
      text-align: left;
    }

    /* Info Lines */
    .fb-info-lines {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 0;
    }

    .fb-info-line {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .fb-info-icon {
      width: 14px;
      height: 14px;
      flex-shrink: 0;
    }

    .fb-info-text {
      color: #b0b3b8;
      font-size: 0.6875rem;
      line-height: 1.4;
    }

    .fb-info-text strong {
      font-weight: 600;
      color: #e4e6eb;
    }

    .fb-link-icon {
      transform: rotate(-45deg);
    }

    /* Instagram Widget Link */
    .insta-widget-link {
      display: block;
      text-decoration: none;
      color: inherit;
      width: 100%;
      cursor: pointer;
    }

    /* Instagram Widget */
    .insta-widget {
      display: flex;
      flex-direction: column;
      align-items: stretch;
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      padding: 0;
      width: 100%;
      height: 480px;
      max-width: 100%;
      margin: 0 auto;
      overflow: hidden;
      position: relative;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .insta-widget-link:hover .insta-widget {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }


    /* Top Section: Profile Info */
    .insta-profile-column {
      display: flex;
      flex-direction: column;
      padding: 20px;
      padding-top: 60px;
      width: 100%;
      align-items: flex-start;
    }

    /* Bottom Section: Posts Row */
    .insta-posts-row {
      display: flex;
      flex-direction: row;
      width: 100%;
      max-width: 420px;
      margin: 6px auto 0 auto;
      gap: 4px;
      padding: 0 8px 8px 8px;
    }

    .insta-profile {
      display: flex;
      flex-direction: row;
      align-items: center;
      margin-bottom: 12px;
      gap: 16px;
      width: 100%;
    }

    .insta-avatar {
      width: 62px;
      height: 62px;
      border-radius: 50%;
      margin-bottom: 0;
      object-fit: cover;
      border: 1px solid #e5e7eb;
      flex-shrink: 0;
    }

    .insta-info {
      text-align: left;
      width: 100%;
    }

    .insta-username {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      gap: 6px;
      margin-bottom: 4px;
    }

    .insta-username span {
      font-size: 0.8rem;
      color: #262626;
      font-weight: 600;
    }

    .insta-icon {
      width: 14px;
      height: 14px;
    }

    /* Instagram Icon in Top Right Corner */
    .insta-corner-icon {
      position: absolute;
      top: 16px;
      left: 16px;
      width: 22px;
      height: 22px;
      z-index: 10;
    }

    .insta-logo-icon {
      left: 42px; /* Position next to the first icon (16px + 22px + 4px gap) */
      top: 14px; /* Moved up 2px from 16px */
      width: auto;
      height: auto;
      max-height: 28px; /* Limit max height but preserve aspect ratio */
      object-fit: contain;
    }

    .insta-description {
      font-size: 0.6rem;
      color: #8e8e8e;
      line-height: 1.2;
      margin: 0;
    }

    .insta-buttons {
      display: flex;
      gap: 8px;
      margin-top: 18px;
      margin-bottom: 12px;
      align-self: center;
      width: 100%;
      justify-content: center;
    }

    .insta-stories-image {
      width: 100%;
      max-width: 100%;
      height: auto;
      border-radius: 8px;
      margin-top: 0;
      object-fit: cover;
    }

    .insta-btn-follow,
    .insta-btn-message {
      flex: 1;
      padding: 5px 12px;
      border-radius: 8px;
      font-size: 0.75rem;
      font-weight: 600;
      text-align: center;
      text-decoration: none;
      transition: all 0.2s ease;
      border: 1px solid transparent;
      display: inline-block;
      pointer-events: none;
    }

    .insta-btn-follow {
      background: #0095f6;
      color: #ffffff;
      border-color: #0095f6;
    }

    .insta-widget-link:hover .insta-btn-follow {
      background: #1877f2;
      border-color: #1877f2;
    }

    .insta-btn-message {
      background: #ffffff;
      color: #262626;
      border-color: #dbdbdb;
    }

    .insta-widget-link:hover .insta-btn-message {
      background: #fafafa;
      border-color: #c7c7c7;
    }

    /* Post Preview Columns */
    .insta-post-preview {
      flex: 1;
      overflow: hidden;
      position: relative;
      min-height: 150px;
      max-width: 33.333%;
      display: flex;
      align-items: stretch;
      padding: 0;
    }

    .insta-post-image {
      width: 100%;
      height: 100%;
      min-height: 150px;
      object-fit: cover;
      display: block;
      border-radius: 4px;
    }

    .insta-post-preview video {
      width: 100%;
      height: 100%;
      min-height: 150px;
      object-fit: cover;
      display: block;
      border-radius: 4px;
    }

    /* Remove underlines from any links inside the Instagram widget (desktop) */
    .instagram-widget-container a,
    .insta-widget a {
      text-decoration: none !important;
    }

    /* TikTok Widget */
    .tiktok-widget-wrapper {
      background: #f9f9fb;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      padding: 0;
      width: 600px;
      height: 480px;
      max-width: 100%;
      margin: 0 auto;
      position: relative;
      overflow: hidden;
    }

    .tiktok-widget-wrapper .tiktok-embed {
      width: 100% !important;
      height: 100% !important;
      margin: 0;
      display: block;
    }

    .tiktok-widget-wrapper .tiktok-embed iframe,
    .tiktok-widget-wrapper iframe {
      width: 100% !important;
      height: 100% !important;
      border: none;
      border-radius: 12px;
      display: block;
    }

    .insta-btn {
      background: linear-gradient(135deg, #fca5a5, #fde68a);
      color: white;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
      padding: 8px 16px;
      border-radius: 9999px;
      text-decoration: none;
      font-size: 0.85rem;
      font-weight: 700;
      font-family: 'McLaren', cursive;
      transition: all 0.3s ease;
      box-shadow: 0 3px 8px rgba(252, 165, 165, 0.3);
      border: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .insta-btn:hover {
      background: linear-gradient(135deg, #f87171, #fbbf24);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(252, 165, 165, 0.4);
    }

    .insta-btn::before {
      content: "";
      width: 16px;
      height: 16px;
      background-image: url('images/instagram.svg');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      filter: brightness(0) invert(1) drop-shadow(1px 1px 2px rgba(0, 0, 0, 0.8));
    }

    @media (max-width: 900px) {
      /* Global mobile styles */
      body {
        width: 100%;
        overflow-x: hidden;
      }
      
      .container {
        width: 100%;
        max-width: 100%;
        padding: 0 1rem;
      }
      
      /* Mobile Navigation */
      header { 
        top: .625rem !important;
        width: 95% !important;
        left: 50% !important;
        transform: translateX(-50%) !important;
        position: fixed !important;
        z-index: 10 !important;
      }
      .navbar { 
        padding: .625rem .75rem !important;
        width: 100% !important;
        min-height: 52px !important;
      }
      
      .brand {
        font-size: 1rem !important;
      }
      
      .brand img {
        width: 28px !important;
        height: 28px !important;
      }
      
      /* Hide desktop menu on mobile */
      .menu { display: none; }
      
      /* Show hamburger menu on mobile */
      .mobile-menu-toggle { display: flex; }
      
      .social-widgets-container {
        grid-template-columns: 1fr !important;
        gap: 2rem !important;
        align-items: center;
        text-align: center;
        margin-top: 4rem !important;
      }

      
      /* Add space between widgets and map section */
      .map-section {
        margin-top: 4rem !important;
      }
      
      /* Add space below map section */
      .gallery-section {
        margin-top: 4rem !important;
      }
      
      .facebook-widget-container,
      .instagram-widget-container,
      .tiktok-widget-container {
        text-align: center;
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      /* Remove underlines from any links inside the Instagram widget (mobile) */
      .instagram-widget-container a,
      .insta-widget a,
      .insta-widget-link { text-decoration: none !important; }
      
      .fb-widget {
        height: 550px;
      }

      .fb-cover-container {
        height: 180px;
      }

      .fb-profile-picture {
        width: 85px;
        height: 85px;
        top: -35px;
        border-width: 3px;
      }

      .fb-page-name {
        font-size: 0.65rem;
        white-space: normal;
        top: -5px;
        left: 108px;
        max-width: calc(100% - 128px);
      }

      .fb-buttons {
        margin-top: 5px;
      }

      .fb-btn-like,
      .fb-btn-message {
        padding: 4px 8px;
        font-size: 0.6rem;
      }

      .fb-btn-icon {
        width: 10px;
        height: 10px;
      }
      
      .insta-widget {
        flex-direction: column !important;
        width: 100%;
        max-width: 500px;
        margin: 0 auto;
        height: 550px;
      }

      .insta-profile-column {
        padding: 16px;
        padding-top: 56px;
      }

      .insta-posts-row {
        flex-direction: column;
        gap: 8px;
        padding: 0 8px 8px 8px;
      }

      .insta-post-preview {
        min-height: 120px;
        max-width: calc(33.333% - 6px);
        flex: 1 1 calc(33.333% - 6px);
      }

      .insta-post-image,
      .insta-post-preview video {
        min-height: 120px;
      }

      .insta-posts-row {
        max-width: 100%;
      }
      
      .insta-avatar {
        width: 56px;
        height: 56px;
      }
      
      .insta-username span {
        font-size: 0.75rem;
      }
      
      .insta-description {
        font-size: 0.55rem;
        line-height: 1.2;
      }

      .insta-btn-follow,
      .insta-btn-message {
        padding: 5px 12px;
        font-size: 0.75rem;
      }
      
      .tiktok-widget-wrapper {
        width: 100%;
        max-width: 600px;
        height: 550px;
        margin: 0 auto;
      }
      
      .facebook-widget-header h2,
      .instagram-widget-header h2,
      .tiktok-widget-header h2 {
        font-size: 1.1rem;
      }
      
      .facebook-widget-header p,
      .instagram-widget-header p,
      .tiktok-widget-header p {
        font-size: 0.9rem;
      }
      
      /* Mobile Widget Links */
      .widget-link-mobile {
        display: block;
        text-decoration: none;
        color: inherit;
        width: 100%;
      }
      
      .widget-link-mobile .fb-widget,
      .widget-link-mobile .insta-widget {
        pointer-events: none;
        cursor: pointer;
      }
      
      .widget-link-mobile .fb-widget *,
      .widget-link-mobile .insta-widget * {
        pointer-events: none;
      }
    }

    /* THREE CARD GALLERY GRID */
    .gallery-grid-three-cards {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      grid-template-rows: 1fr 1fr;
      gap: 2rem;
      margin-top: 0;
      width: min(1200px, 100%);
      margin-left: auto;
      margin-right: auto;
      height: 600px;
    }

    /* LIGHTBOX (gallery modal) */
    .lightbox-overlay { position: fixed; inset: 0; background: rgba(0,0,0,.9); display: none; align-items: center; justify-content: center; z-index: 10000; opacity: 0; transition: opacity .3s ease; }
    .lightbox-overlay.show { display: flex; opacity: 1; }
    .lightbox-content { max-width: 95vw; max-height: 95vh; position: relative; display:flex; align-items:center; justify-content:center; }
    .lightbox-content.video-active { max-width: 95vw; max-height: 95vh; }
    .lightbox-content img { max-width: 95vw; max-height: 95vh; width: auto; height: auto; border-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,.4); }
    .lightbox-content iframe { width: 100%; height: 100%; border: none; border-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,.4); }
    .lightbox-close { position: absolute; top: 24px; right: 24px; background: rgba(255,255,255,.95); color:#222; border:none; width:40px; height:40px; border-radius:50%; cursor:pointer; display:flex; align-items:center; justify-content:center; font-size:24px; box-shadow:0 4px 12px rgba(0,0,0,.25); }
    .lightbox-nav { position:absolute; top:50%; transform: translateY(-50%); background: transparent; border:none; width:56px; height:56px; cursor:pointer; display:flex; align-items:center; justify-content:center; z-index:10001; transition: transform .3s ease; }
    .lightbox-nav:hover { transform: translateY(-50%) scale(1.1); opacity:.85; }
    .lightbox-nav img { width:24px; height:24px; pointer-events:none; }
    .lightbox-prev { left: 20px; }
    .lightbox-next { right: 20px; }
    @media (max-width: 900px) { .lightbox-nav { width:44px; height:44px; } .lightbox-nav img { width:20px; height:20px; } .lightbox-prev { left: 10px; } .lightbox-next { right:10px; } }
    
    /* Card 1 - top left, single column */
    .gallery-grid-three-cards .gallery-item:nth-child(1) {
      height: 100%;
    }
    
    /* Card 2 - bottom left, single column */
    .gallery-grid-three-cards .gallery-item:nth-child(2) {
      height: 100%;
    }
    
    /* Card 3 - right side, spanning both rows and 2 columns */
    .gallery-grid-three-cards .gallery-item:nth-child(3) {
      grid-row: 1 / -1;
      grid-column: 2 / -1;
      height: 100%;
    }
    
    /* Card 3 image - fill completely */
    .gallery-grid-three-cards .gallery-item:nth-child(3) .gallery-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* object-position will be set by individual photo rules below */
    }

    /* FIVE CARD GALLERY GRID */
    .gallery-grid-five-cards {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      grid-template-rows: 1fr 1fr;
      gap: 2rem;
      margin-top: 4rem;
      width: min(1200px, 100%);
      margin-left: auto;
      margin-right: auto;
      height: 600px;
    }
    
    /* Left column - 1 smaller card (first row) */
    .gallery-grid-five-cards .gallery-item:nth-child(1) {
      grid-column: 1;
      grid-row: 1;
      height: 100%;
    }
    
    /* Right column - 1 smaller card (first row) */
    .gallery-grid-five-cards .gallery-item:nth-child(2) {
      grid-column: 3;
      grid-row: 1;
      height: 100%;
    }
    
    /* Middle column - 1 longer video card spanning 2 rows */
    .gallery-grid-five-cards .gallery-item:nth-child(3) {
      grid-column: 2;
      grid-row: 1 / -1;
      height: 100%;
    }
    
    /* Left column - 1 smaller card (second row) */
    .gallery-grid-five-cards .gallery-item:nth-child(4) {
      grid-column: 1;
      grid-row: 2;
      height: 100%;
    }
    
    /* Right column - 1 smaller card (second row) */
    .gallery-grid-five-cards .gallery-item:nth-child(5) {
      grid-column: 3;
      grid-row: 2;
      height: 100%;
    }

    /* VIDEO MODAL */
    .video-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      justify-content: center;
      align-items: center;
    }
    .video-modal.active {
      display: flex;
    }
    .video-modal-content {
      position: relative;
      max-width: 100%;
      max-height: 100%;
      background: #000;
  
      overflow: hidden;
    }
    .video-modal video {
      width: 100%;
      height: 100%;
      max-height: 100vh;
    }
    .video-modal-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: rgba(255, 255, 255, 0.9);
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.3s ease;
    }
    .video-modal-close:hover {
      background: rgba(255, 255, 255, 1);
    }

    /* FOOTER */
    footer { 
      background: radial-gradient(circle at 20% 10%, #fde68a, #fecaca 60%, #fee2e2 100%); 
      margin-top: 2.25rem; 
      padding: 3rem 0; 
    }
    .footer-grid { display:grid; grid-template-columns: 2fr 1fr 1fr; gap: 2rem; align-items: start; }
    .footer-brand { display:flex; align-items:center; gap: 1.5rem; }
    .footer-brand img { width: 10rem; height: 10rem; }
    .footer-content { flex: 1; margin-top: 0.25rem; }
    .footer-title { font-family: 'McLaren', cursive; font-size: 1.3rem; color: #000; margin: 0 0 1rem 0; line-height: 1.3; }
    .footer-email { 
      display: flex; 
      align-items: center; 
      margin-bottom: 1rem; 
      flex-wrap: wrap;
      word-break: break-all;
      gap: 0.5rem;
    }
    .footer-email svg { color: #000; transition: color 0.3s ease; }
    .footer-email:hover svg { color: #666; }
    .footer-email a { 
      color: #000; 
      text-decoration: none; 
      font-size: 0.9rem; 
      transition: all 0.3s ease;
      word-break: break-all;
      max-width: 100%;
      overflow-wrap: break-word;
    }
    .footer-email a:hover {
      color: #666;
      text-decoration: underline;
      font-weight: 700;
    }
    .footer-copyright { color: #000; font-size: 0.65rem; line-height: 1.4; }
    .footer-links { display: flex; gap: 7rem; }
    .footer-links .links a {
      position: relative;
      display: inline-block;
      font-weight: 500;
      transition: font-weight 0.3s ease, color 0.3s ease;
    }

    .footer-links .links a::after {
      content: attr(data-text);
      visibility: hidden;
      font-weight: 700;
      height: 0;
      overflow: hidden;
      pointer-events: none;
      display: block;
    }

    .footer-links .links a:hover {
      font-weight: 700;
      color: #666;
    }
    .links-column h4 { 
      color: #000; 
      font-size: 1rem; 
      margin: 0 0 1rem 0; 
      font-weight: 600; 
      white-space: nowrap; 
      transition: all 0.3s ease;
      cursor: pointer;
    }
    .links-column h4:hover {
      font-weight: 700;
      color: #333;
    }
    .links { display: flex; flex-direction: column; gap: 0.5rem; }
    .links a { 
      color: #000; 
      text-decoration: none; 
      font-size: 0.875rem; 
      transition: all 0.3s ease;
      white-space: nowrap;
      font-weight: 400;
      display: block;
      width: 100%;
      text-align: left;
    }
    .links a:hover {
      color: #666;
      font-weight: 700;
    }
    .footer-social { display: flex; flex-direction: column; align-items: flex-end; gap: 2.5rem; }
    .socials { display: flex; gap: 0.75rem; }
    .socials a { 
      display: inline-block; 
      text-decoration: none; 
      transition: all 0.3s ease;
      width: 40px;
      height: 40px;
    }
    .socials a:hover {
      transform: scale(1.1);
      opacity: 0.8;
    }
    .footer-social .footer-copyright { 
      text-align: right; 
      margin-top: 0;
      margin-bottom: 0;
    }
    .footer-social .footer-copyright:not(:last-of-type) {
      margin-bottom: -1rem;
    }
    .footer-social .footer-copyright a {
      color: #000;
      font-family: 'McLaren', cursive;
      text-decoration: none;
    }
    .footer-social .footer-copyright a:hover {
      text-decoration: none;
      color: #000;
    }

    /* EMAIL ICON STYLING - Desktop only */
    .footer-email img {
      width: 25px;
      height: 25px;
      max-width: 25px;
      max-height: 25px;
      min-width: 25px;
      min-height: 25px;
    }
    
    /* Mobile email icon overrides */
    @media (max-width: 1100px) {
      .footer-email img {
        width: clamp(14px, 3.5vw, 20px) !important;
        height: clamp(14px, 3.5vw, 20px) !important;
        max-width: none !important;
        max-height: none !important;
        min-width: 0 !important;
        min-height: 0 !important;
      }
    }

    /* CAROUSEL STYLES */
    .carousel-container {
      position: relative;
      width: 100%;
      overflow: hidden;
      margin: 3rem 0 2rem 0;
      padding: 0;
      transform: translateZ(0); /* Force hardware acceleration */
      isolation: isolate; /* Create new stacking context */
    }
    
    .carousel-track {
      display: flex;
      transition: transform 0.5s ease-in-out;
      width: 100%;
      transform: translateZ(0); /* Force hardware acceleration */
      will-change: transform; /* Optimize for transforms */
    }
    
    .carousel-item {
      min-width: 100%;
      flex-shrink: 0;
      padding: 0 1rem;
      transform: translateZ(0); /* Force hardware acceleration */
      box-sizing: border-box;
    }
    
    .carousel-item img,
    .carousel-item video {
      width: 100%;
      height: 500px;
      object-fit: cover;
      border-radius: 1rem;
      display: block;
    }
    
    /* Ensure carousel items take full width */
    .carousel-item {
      width: 100%;
      max-width: 100%;
      height: 500px;
      min-width: 250px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    /* Fix for Facebook video embeds in carousel */
    .carousel-item .facebook-video-embed {
      width: 100%;
      height: 500px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f0f0f0;
      border-radius: 1rem;
      overflow: hidden;
    }
    
    .carousel-item .facebook-video-embed iframe {
      width: 100% !important;
      height: 100% !important;
      min-height: 500px !important;
      border: none !important;
      border-radius: 1rem !important;
    }
    
    .carousel-item img {
      height: 500px !important;
      width: 500px !important;
      object-fit: cover !important;
    }
    
    /* Sensitive content in carousel */
    .carousel-item .sensitive-content {
      width: 500px;
      height: 500px;
      position: relative;
      border-radius: 1rem;
      overflow: hidden;
    }
    
    .carousel-item .sensitive-content img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .carousel-item .sensitive-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 1rem;
    }
    
    .carousel-controls {
      display: flex;
      justify-content: center;
      gap: 1rem;
      position: absolute;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 20;
      margin: 0;
    }
    
    .carousel-btn {
      background: linear-gradient(135deg, #fca5a5, #fde68a);
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      color: white;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      backdrop-filter: blur(4px);
    }
    
    .carousel-btn:hover {
      background: linear-gradient(135deg, #f87171, #fbbf24);
      transform: scale(1.1);
    }
    
    .carousel-dots {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      position: absolute;
      bottom: 15px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 20;
      margin: 0;
    }
    
    .carousel-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: rgba(255,255,255,0.5);
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid rgba(255,255,255,0.8);
      backdrop-filter: blur(4px);
    }
    
    .carousel-dot.active {
      background: #fca5a5;
      border-color: #f87171;
      box-shadow: 0 2px 8px rgba(252,165,165,0.5);
    }

    /* MOBILE VIDEO SECTION */
    .mobile-video-section {
      padding: 1rem 0 3rem 0;
      background: #f8fafc;
    }
    
    .video-section-header {
      text-align: center;
      margin-bottom: 1rem;
    }
    
    .video-section-header h3 {
      font-family: 'McLaren', cursive;
      font-size: 1.8rem;
      color: #1f2937;
      margin-bottom: 0.5rem;
    }
    
    .video-section-header p {
      color: #6b7280;
      font-size: 1rem;
    }
    
    .mobile-video-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.5rem;
      max-width: none;
      width: 100%;
      margin: 0;
      padding: 0;
    }
    
    .mobile-video-item {
      background: transparent;
      border-radius: 1rem;
      overflow: hidden;
      box-shadow: none;
      transition: transform 0.3s ease;
      height: auto;
      aspect-ratio: 4 / 3;
    }
    
    .mobile-video-item:hover {
      transform: translateY(-2px);
    }
    
    .mobile-video-item .facebook-video-embed {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: relative;
    }
    
    .mobile-video-item .facebook-video-embed iframe {
      width: 100% !important;
      height: 100% !important;
      border: none;
      border-radius: 0.75rem;
      display: block;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    
    .mobile-video-item .facebook-video-embed,
    .mobile-video-item .facebook-video-embed iframe,
    .mobile-video-item .fb-video,
    .mobile-video-item .fb-video span {
      transform: none !important;
    }
    
    .mobile-video-item .fb-video {
      width: 100% !important;
      height: 100% !important;
    }
    
    .mobile-video-item .fb-video > span {
      width: 100% !important;
      height: 100% !important;
      display: block !important;
    }

    /* GALLERY FOOTER SPACER */
    .gallery-footer-spacer {
      height: 100px;
      transition: height 0.3s ease;
    }

    /* SPECIFIC FIX FOR 860px WIDTH */
    @media (max-width: 860px) {
      .mobile-video-section {
        padding: 0.5rem 0 1.5rem 0 !important;
        margin-bottom: 0.5rem !important;
      }
      
      .carousel-container {
        margin: 2rem 0 1rem 0 !important;
      }
      
      footer {
        padding: 2rem 0 !important;
      }
    }

    /* RESPONSIVE */
    /* Smaller phones - extra small devices */
    @media (max-width: 400px) {
      .big-card-image {
        height: 320px !important;
        padding: 45px 15px !important;
        background-size: 80% !important;
      }
    }
    
    /* Very small phones */
    @media (max-width: 350px) {
      .big-card-image {
        height: 300px !important;
        padding: 40px 12px !important;
        background-size: 75% !important;
      }
      
      .big-card h2 {
        font-size: 1.5rem !important;
        line-height: 1.25 !important;
      }
    }
    
    /* Extra small phones - even higher overlap */
    @media (max-width: 400px) {
      .overlap {
        margin-top: -34vh !important;
      }
    }
    
    /* Extra small phones (≤350px) - title */
    @media (max-width: 350px) {
      .big-card h2 {
        font-size: 1.4rem !important;
      }
    }
    
    /* Small phones title adjustment */
    @media (min-width: 351px) and (max-width: 400px) {
      .big-card h2 {
        font-size: 1.5rem !important;
      }
    }
    
    /* Slightly larger phones */
    @media (max-width: 450px) {
      .big-card h2 {
        font-size: 1.55rem !important;
      }
    }
    
    /* Medium phones title */
    @media (min-width: 401px) and (max-width: 500px) {
      .big-card h2 {
        font-size: 1.65rem !important;
      }
    }
    
    /* Larger phones title */
    @media (min-width: 501px) and (max-width: 600px) {
      .big-card h2 {
        font-size: 1.7rem !important;
      }
    }
    
    /* Tablets title */
    @media (min-width: 601px) and (max-width: 700px) {
      .big-card h2 {
        font-size: 1.85rem !important;
      }
    }
    
    /* Larger tablets */
    @media (min-width: 701px) and (max-width: 900px) {
      .big-card h2 {
        font-size: 2rem !important;
      }
    }
    
    /* Medium phones */
    @media (min-width: 401px) and (max-width: 600px) {
      .big-card-image {
        height: 360px !important;
        background-size: 62% !important;
      }
      
      .overlap {
        margin-top: -33vh !important;
      }
    }
    
    /* Tablets and small desktops */
    @media (min-width: 601px) and (max-width: 900px) {
      .big-card-image {
        height: 400px !important;
        background-size: 65% !important;
      }
      
      .overlap {
        margin-top: -30vh !important;
      }
      
      .map-info {
        text-align: center !important;
      }
      
      .map-info h4 {
        text-align: center !important;
      }
      
      .map-info p {
        text-align: center !important;
      }
      
      .map-stats {
        justify-content: center !important;
      }
    }
    
    /* Extra small phones - map info adjustments */
    /* Additional breakpoints for map spacing */
    @media (max-width: 600px) {
      .map-section .map-info {
        margin-top: -3rem !important;
        padding: 0.875rem !important;
      }
      
      .map-section .map-wrapper {
        margin-bottom: -2.5rem !important;
      }
      
      .map-section .map-wrapper + .map-info,
      .map-container .map-info {
        margin-top: -3rem !important;
      }
    }
    
    @media (max-width: 480px) {
      .map-section .map-info {
        margin-top: -3.5rem !important;
        padding: 0.75rem !important;
      }
      
      .map-section .map-wrapper {
        margin-bottom: -3rem !important;
      }
      
      .map-section .map-wrapper + .map-info,
      .map-container .map-info {
        margin-top: -3.5rem !important;
      }
    }
    
    @media (max-width: 350px) {
      .map-info {
        padding: 1.5rem 1rem !important;
      }
      
      .map-section .map-info {
        margin-top: -3.5rem !important;
        padding: 0.75rem !important;
      }
      
      .map-section .map-wrapper {
        margin-bottom: -3rem !important;
      }
      
      .map-stats {
        gap: 1.5rem !important;
      }
      
      /* Footer adjustments for extra small phones */
      .footer-brand {
        gap: 0.75rem !important;
      }
      
      .footer-brand img {
        width: 4.5rem !important;
        height: 4.5rem !important;
      }
      
      .footer-title {
        font-size: 0.85rem !important;
        line-height: 1.25 !important;
      }
      
      .footer-social .footer-copyright {
        font-size: 0.7rem !important;
      }
    }
    
    /* Small phones - map info adjustments */
    @media (min-width: 351px) and (max-width: 400px) {
      .map-info {
        padding: 1.75rem 1.25rem !important;
      }
      
      .footer-brand img {
        width: 6rem !important;
        height: 6rem !important;
      }
      
      .footer-title {
        font-size: 0.95rem !important;
      }
      
      .footer-social .footer-copyright {
        font-size: 0.75rem !important;
      }
    }
    
    /* Medium-small phones */
    @media (min-width: 401px) and (max-width: 500px) {
      .footer-brand img {
        width: 7rem !important;
        height: 7rem !important;
      }
      
      .footer-title {
        font-size: 1.05rem !important;
      }
      
      .footer-social .footer-copyright {
        font-size: 0.8rem !important;
      }
    }
    
    /* Large phones and tablets */
    @media (min-width: 501px) and (max-width: 900px) {
      .footer-social .footer-copyright {
        font-size: 0.85rem !important;
      }
    }
    
    @media (max-width: 900px) {
      /* Global mobile styles */
      body {
        width: 100%;
        overflow-x: hidden;
      }
      
      .container {
        width: 100%;
        max-width: 100%;
        padding: 0 1rem;
      }
      
      header { 
        top: 8px; 
        width: 95%;
        left: 50%;
        transform: translateX(-50%);
      }
      
      .navbar { 
        padding: 6px 12px; 
        width: 100%;
        min-height: 45px;
      }
      
      .menu { gap: .5rem; }
      .menu a { padding: .375rem .5rem; }
      
      /* Mobile Hero Section */
      .hero {
        min-height: 100vh;
        background-size: cover;
        background-position: center;
        width: 100%;
        position: relative;
        overflow: visible;
      }
      
      .hero-content {
        width: 70%;
        max-width: 300px;
        margin-left: 1% !important;
        text-align: left;
        padding-top: 8rem;
      }
      
      .hero h1 {
        position: static !important;
        transform: none !important;
        padding-top: 0 !important;
        font-size: clamp(22px, 4.5vw, 28px) !important;
        text-align: left !important;
        width: 100%;
        margin-bottom: 1rem !important;
        line-height: 1.2 !important;
        padding: 1rem !important;
      }
      
      .hero-subtitle {
        position: static;
        font-size: clamp(16px, 4vw, 20px);
        text-align: left;
        white-space: normal;
        margin-bottom: 2rem;
      }
      
      .hero-button-left,
      .hero-button {
        position: static;
        margin: 0 auto;
        display: block;
        width: 200px;
      }
      
      /* Mobile Big Card Section */
      .section {
        padding: 0 !important;
        width: 100% !important;
      }
      
      .overlap {
        width: 100% !important;
        max-width: 100% !important;
        padding: 0 !important;
        margin-top: -35vh !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
      }
      
      .big-card-container {
        width: 100% !important;
        max-width: 100% !important;
        padding: 0 !important;
        margin: 0 !important;
      }
      
      .big-card { 
        flex-direction: column;
        height: auto; 
        min-height: 700px;
        width: 100% !important;
        max-width: 100% !important;
        overflow: hidden;
        border-radius: 1rem;
        margin: 0 !important;
      }
      
      .big-card-image { 
        height: 380px;
        flex: none; 
        background-size: 85%;
        background-position: center center;
        background-repeat: no-repeat;
        padding: 50px 20px;
        margin: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        box-sizing: border-box;
      }
      
      .big-card-content { 
        padding: 1.25rem 1.5rem; 
        min-height: 400px;
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: flex-start;
      }
      
      .big-card .muted {
        line-height: 1.6;
        margin-bottom: 1.5rem;
        font-size: 0.9rem !important;
      }
      
      .big-card h2 { 
        font-size: clamp(1.5rem, 4vw, 1.75rem); 
        line-height: 1.3;
      }
      
      .big-card .btn {
        align-self: center !important;
        padding: clamp(0.75rem, 2.5vw, 1rem) clamp(1.5rem, 4vw, 2rem) !important;
        font-size: clamp(0.95rem, 2.5vw, 1.125rem) !important;
        width: auto !important;
        max-width: 90%;
      }
      
      .overlap { 
        margin-top: -35vh; 
        position: relative;
        z-index: 2;
      }
      /* Mobile Map Section */
      #map-title-new {
        font-size: 1.25rem !important;
        margin-bottom: 0.5rem !important;
        text-align: center !important;
      }
      
      .map-section {
        padding: 1rem 0 0.5rem 0 !important;
      }
      
      .map-container { 
        flex-direction: column; 
        gap: 1.5rem !important; 
        padding: 0 !important;
        margin: 0 !important;
      }
      
      .map-info { 
        max-width: 100%; 
        order: 2;
        margin-top: 0 !important;
        margin-bottom: 1rem !important;
        padding: 0.875rem 1rem 0.5rem 1rem !important;
        flex: none !important;
        height: auto !important;
      }
      
      .map-info h4 {
        font-size: 1rem !important;
        text-align: center !important;
        margin-bottom: 0.25rem !important;
      }
      
      .map-info p {
        font-size: 0.75rem !important;
        text-align: center !important;
        margin-bottom: 0.35rem !important;
        line-height: 1.3 !important;
      }
      
      .map-wrapper { 
        order: 1;
        width: 100%;
        max-width: 100%;
        padding: 0 !important;
        margin: 0 !important;
      }
      
      #turkeyMapContainer {
        min-height: 400px !important;
        padding: 5px 0 !important;
      }
      
      #turkeyMapContainer svg {
        width: 100% !important;
        height: auto !important;
        min-height: 350px !important;
        display: block !important;
      }
      
      .turkey-map {
        max-height: 400px !important;
        width: 100% !important;
      }
      
      .map-stats { 
        justify-content: center; 
        gap: 1.5rem;
        margin-top: 0 !important;
        margin-bottom: 0 !important;
      }
      
      .stat-item {
        flex: 1;
        min-width: 0;
        text-align: center !important;
      }
      
      .stat-item {
        flex: 0 0 auto;
        min-width: auto;
        text-align: center;
      }
      
      /* Mobile Social Widget Headers */
      .facebook-widget-header h2,
      .instagram-widget-header h2,
      .tiktok-widget-header h2 {
        font-size: 1.25rem !important;
        margin-bottom: 0.5rem !important;
      }
      
      .facebook-widget-header p,
      .instagram-widget-header p,
      .tiktok-widget-header p {
        font-size: 0.85rem !important;
        margin-bottom: 1rem !important;
      }
      
      /* Mobile Gallery Header */
      .gallery-header h3 {
        font-size: 1.25rem !important;
        margin-bottom: 0.75rem !important;
      }
      
      .gallery-header p {
        font-size: 0.9rem !important;
      }
      
      /* Mobile Footer Styling */
      footer {
        padding: 2rem 0 !important;
      }
      
      .footer-grid {
        display: flex !important;
        flex-direction: column !important;
        gap: 2rem !important;
        padding: 0 1rem !important;
        text-align: center !important;
        align-items: center !important;
        width: 100% !important;
      }
      
      .footer-main {
        order: 1 !important;
        display: flex !important;
        justify-content: center !important;
        align-items: center !important;
        width: 100% !important;
      }
      
      .footer-brand {
        flex-direction: row !important;
        align-items: center !important;
        gap: clamp(1rem, 3vw, 1.5rem) !important;
        max-width: 100% !important;
        justify-content: flex-start !important;
        text-align: left !important;
        padding: 0 0.5rem !important;
        width: 100% !important;
        display: flex !important;
      }
      
      .footer-brand img {
        width: clamp(5rem, 18vw, 9rem) !important;
        height: clamp(5rem, 18vw, 9rem) !important;
        flex-shrink: 0 !important;
        object-fit: contain !important;
      }
      
      .footer-content {
        flex: 1 !important;
        text-align: left !important;
        display: flex !important;
        flex-direction: column !important;
        align-items: flex-start !important;
        justify-content: center !important;
        gap: 0.25rem !important;
      }
      
      .footer-title {
        font-size: clamp(0.9rem, 3.5vw, 1.25rem) !important;
        margin-bottom: 0.25rem !important;
        line-height: 1.3 !important;
        white-space: normal !important;
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
        hyphens: auto !important;
        text-align: left !important;
        width: 100% !important;
      }
      
      .footer-email {
        justify-content: flex-start !important;
        margin-bottom: 0 !important;
        margin-top: 0 !important;
        display: flex !important;
        align-items: center !important;
        width: 100% !important;
        flex-wrap: wrap !important;
        gap: 0.5rem !important;
        font-size: clamp(0.75rem, 3vw, 0.9rem) !important;
        line-height: 1;
      }
      
      .footer-email img {
        width: clamp(14px, 3.5vw, 20px) !important;
        height: clamp(14px, 3.5vw, 20px) !important;
        flex-shrink: 0 !important;
        margin: 0 !important;
        display: inline-block !important;
        vertical-align: middle !important;
      }
      
      .footer-email a {
        font-size: inherit !important;
        word-break: break-word !important;
        max-width: 100% !important;
        overflow-wrap: break-word !important;
        text-align: left !important;
        line-height: 1.3 !important;
        display: inline-block !important;
      }
      
      .footer-links {
        order: 2 !important;
        flex-direction: column !important;
        gap: 2rem !important;
        align-items: center !important;
        margin-bottom: 1rem !important;
        justify-content: center !important;
        width: 100% !important;
        display: flex !important;
      }
      
      .links-column {
        text-align: center !important;
        width: 100% !important;
      }
      
      .links-column h4 {
        text-align: center !important;
        margin-bottom: 0.75rem !important;
        font-size: 1rem !important;
      }
      
      .links-column .links {
        align-items: center !important;
        gap: 0.5rem !important;
        display: flex !important;
        flex-direction: column !important;
      }
      
      .links a {
        text-align: center !important;
        font-size: 0.9rem !important;
      }
      
      .footer-social {
        order: 3 !important;
        align-items: center !important;
        gap: 2rem !important;
        width: 100% !important;
        display: flex !important;
        flex-direction: column !important;
      }
      
      .socials {
        gap: 1.5rem !important;
        display: flex !important;
        justify-content: center !important;
      }
      
      .socials a {
        width: 42px !important;
        height: 42px !important;
      }
      
      .footer-social .footer-copyright {
        text-align: center !important;
        font-size: 0.6rem !important;
        line-height: 1.3 !important;
        width: 100% !important;
        margin-top: 0 !important;
        margin-bottom: 0 !important;
      }
      .footer-social .footer-copyright:not(:last-of-type) {
        margin-bottom: -1.2rem !important;
      }
      .footer-social .footer-copyright a {
        color: #000 !important;
        font-family: 'McLaren', cursive !important;
        text-decoration: none !important;
      }
      .footer-social .footer-copyright a:hover {
        text-decoration: none !important;
        color: #000 !important;
      }
      
      .stat-number {
        font-size: clamp(1.75rem, 6vw, 2rem);
        display: block;
      }
      
      .stat-label {
        font-size: clamp(0.85rem, 2.5vw, 0.875rem);
        display: block;
      }
      
      /* Mobile Social Widgets */
      .social-widgets-container {
        grid-template-columns: 1fr !important;
        gap: 2rem;
        padding: 0 1rem;
      }

      
      .facebook-widget-container,
      .instagram-widget-container,
      .tiktok-widget-container {
        width: 100%;
        max-width: 100%;
      }
      
      .fb-widget,
      .insta-widget {
        width: 100%;
        max-width: 100%;
        height: 500px;
      }
      
      .fb-cover-container {
        height: 160px;
      }

      .fb-profile-picture {
        width: 75px;
        height: 75px;
        top: -30px;
        left: 16px;
        border-width: 3px;
      }

      .fb-profile-section {
        padding: 50px 16px 16px 16px;
      }

      .fb-page-name {
        font-size: 0.65rem;
        margin-bottom: 0;
        white-space: normal;
        top: 0px;
        left: 99px;
        max-width: calc(100% - 115px);
      }

      .fb-buttons {
        margin-top: 4px;
      }

      .fb-btn-like,
      .fb-btn-message {
        font-size: 0.6rem;
        padding: 4px 8px;
      }
      
      .tiktok-widget-wrapper {
        width: 100%;
        max-width: 100%;
        height: 500px;
      }
      
      
      .insta-widget {
        padding: 10px 15px;
      }
      
      .insta-avatar {
        width: 52px;
        height: 52px;
      }
      
      .insta-info h3 {
        font-size: 0.85rem;
      }
      
      .insta-info p {
        font-size: 0.75rem;
      }
      
      .insta-btn {
        padding: 6px 12px;
        font-size: 0.75rem;
      }
      
      /* Mobile Gallery Carousel */
      .gallery-section {
        padding: 4rem 0 !important;
        transform: none !important;
        margin-bottom: 0 !important;
      }
      
      /* Hide all desktop galleries on mobile */
      .gallery-grid,
      .gallery-grid-three-cards,
      .gallery-grid-five-cards {
        display: none !important;
        visibility: hidden !important;
      }
      
      /* Show carousels on mobile */
      .gallery-carousel {
        display: block !important;
        visibility: visible !important;
      }
      
      /* Show mobile video section on mobile */
      .mobile-video-section {
        display: block !important;
        padding: 1rem 0 2rem 0 !important;
        margin-bottom: 4rem !important;
      }
      
      /* Hide video section header on mobile */
      .video-section-header {
        display: none !important;
      }
      
      /* Make mobile video items fully responsive */
      .mobile-video-item {
        width: 100% !important;
        max-width: 100% !important;
        height: auto !important;
        aspect-ratio: 16 / 9 !important;
        margin: 0 !important;
        padding: 0 !important;
      }
      
      .mobile-video-item .facebook-video-embed {
        width: 100% !important;
        height: 100% !important;
        display: block !important;
      }
      
      .mobile-video-item .facebook-video-embed iframe {
        width: 100% !important;
        max-width: 100% !important;
        height: 100% !important;
        border-radius: 0.75rem !important;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15) !important;
      }
      
      .mobile-video-grid {
        padding: 0 !important;
        width: 100% !important;
        max-width: none !important;
        margin: 0 !important;
      }
      
      /* Show gallery footer spacer on mobile */
      .gallery-footer-spacer {
        display: block !important;
        height: 4rem !important;
      }
      
      .gallery-section-no-padding {
        padding: 3rem 0 !important;
        transform: none !important;
        margin-top: 0 !important;
        margin-bottom: 0 !important;
      }
      
      /* Gallery section spacing after map-info card */
      .map-section + .gallery-section,
      .map-section + section.gallery-section {
        margin-top: 5rem !important;
        padding: 2.5rem 0 0.25rem 0 !important;
      }
      
      .gallery-header {
        margin-bottom: 1rem !important;
        transform: scale(0.9) !important;
        transform-origin: center !important;
      }
      
      .gallery-header h3 {
        font-size: 1.2rem !important;
      }
      
      .gallery-header p {
        font-size: 0.9rem !important;
      }
      
      /* Mobile Footer Styling */
      footer {
        padding: 2rem 0 !important;
      }
      
      .footer-grid {
        display: flex !important;
        flex-direction: column !important;
        gap: 2rem !important;
        padding: 0 1rem !important;
        text-align: center !important;
        align-items: center !important;
        width: 100% !important;
      }
      
      .footer-main {
        order: 1 !important;
        display: flex !important;
        justify-content: center !important;
        align-items: center !important;
        width: 100% !important;
      }
      
      .footer-brand {
        flex-direction: row !important;
        align-items: center !important;
        gap: clamp(1rem, 3vw, 1.5rem) !important;
        max-width: 100% !important;
        justify-content: flex-start !important;
        text-align: left !important;
        width: 100% !important;
        display: flex !important;
        padding: 0 0.5rem !important;
      }
      
      .footer-brand img {
        width: clamp(5rem, 18vw, 9rem) !important;
        height: clamp(5rem, 18vw, 9rem) !important;
        flex-shrink: 0 !important;
        object-fit: contain !important;
      }
      
      .footer-content {
        flex: 1 !important;
        text-align: left !important;
        display: flex !important;
        flex-direction: column !important;
        align-items: flex-start !important;
        justify-content: center !important;
        gap: 0.25rem !important;
      }
      
      .footer-title {
        font-size: clamp(0.9rem, 3.5vw, 1.25rem) !important;
        margin-bottom: 0.25rem !important;
        line-height: 1.3 !important;
        white-space: normal !important;
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
        hyphens: auto !important;
        text-align: left !important;
        width: 100% !important;
      }
      
      .footer-email {
        justify-content: flex-start !important;
        margin-bottom: 0 !important;
        margin-top: 0 !important;
        display: flex !important;
        align-items: center !important;
        width: 100% !important;
        flex-wrap: wrap !important;
        gap: 0.5rem !important;
        font-size: clamp(0.75rem, 3vw, 0.9rem) !important;
        line-height: 1;
      }
      
      .footer-email img {
        width: clamp(14px, 3.5vw, 20px) !important;
        height: clamp(14px, 3.5vw, 20px) !important;
        flex-shrink: 0 !important;
        margin: 0 !important;
        display: inline-block !important;
        vertical-align: middle !important;
      }
      
      .footer-email a {
        font-size: inherit !important;
        word-break: break-word !important;
        max-width: 100% !important;
        overflow-wrap: break-word !important;
        text-align: left !important;
        line-height: 1.3 !important;
        display: inline-block !important;
      }
      
      .footer-links {
        order: 2 !important;
        flex-direction: column !important;
        gap: 2rem !important;
        align-items: center !important;
        margin-bottom: 1rem !important;
        justify-content: center !important;
        width: 100% !important;
        display: flex !important;
      }
      
      .links-column {
        text-align: center !important;
        width: 100% !important;
      }
      
      .links-column h4 {
        text-align: center !important;
        margin-bottom: 0.75rem !important;
        font-size: 1rem !important;
      }
      
      .links-column .links {
        align-items: center !important;
        gap: 0.5rem !important;
        display: flex !important;
        flex-direction: column !important;
      }
      
      .links a {
        text-align: center !important;
        font-size: 0.9rem !important;
      }
      
      .footer-social {
        order: 3 !important;
        align-items: center !important;
        gap: 2rem !important;
        width: 100% !important;
        display: flex !important;
        flex-direction: column !important;
      }
      
      .socials {
        gap: 1.5rem !important;
        display: flex !important;
        justify-content: center !important;
      }
      
      .socials a {
        width: 56px !important;
        height: 56px !important;
      }
      
      .footer-social .footer-copyright {
        text-align: center !important;
        font-size: clamp(0.75rem, 2vw, 0.875rem) !important;
        line-height: 1.3 !important;
        width: 100% !important;
        margin-bottom: 2rem !important;
      }
      
      /* Add extra spacing at bottom */
      body {
        padding-bottom: 2rem !important;
      }
      
      /* Final gallery section - match other sections with highest specificity */
      body .gallery-section-no-padding.final-gallery-section {
        padding: 0.5rem 0 !important;
        margin-top: -4rem !important; /* Smaller negative margin to bring it closer */
        transform: scale(0.95) !important;
        transform-origin: top center !important;
        margin-bottom: -8% !important;
      }
      
      /* Target third gallery section by content - has gallery-grid-five-cards */
      .gallery-section-no-padding:has(.gallery-grid-five-cards) {
        margin-top: -14rem !important; /* Match the spacing of other sections */
        margin-bottom: -8% !important;
        padding: 0.5rem 0 !important;
        zoom: 0.92 !important; /* Scale to match previous sections */
      }
      
      /* More specific targeting with body prefix and section */
      body section.gallery-section-no-padding:has(.gallery-grid-five-cards) {
        margin-top: -16.3rem !important;
        background: transparent !important; /* Remove background to prevent overlap */
      }
      
      /* Alternative approach - target by last gallery section */
      .gallery-section-no-padding:last-of-type {
        margin-top: -18rem !important;
        background: transparent !important; /* Remove background to prevent overlap */
      }
      
    }
  </style>
</head>
<body>
  <div id="fb-root"></div>
  <script async defer crossorigin="anonymous" 
    src="https://connect.facebook.net/pl_PL/sdk.js#xfbml=1&version=v19.0" nonce="xyz123"></script>
  <header>
    <div class="navbar">
      <div class="brand">
        <a href="index.html" style="display:flex; align-items:center; gap:10px; text-decoration:none; color:inherit;">
          <img src="images/logo.svg" alt="Logo">
          <span>Z Piekła Do Domu</span>
        </a>
      </div>
      <!-- Hamburger Menu Button -->
      <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>
      
      <nav class="menu">
        <a href="index.html">Strona główna</a>
        <a href="adopcje.html">Adopcje</a>
        <div class="dropdown">
          <a href="#" class="dropdown-toggle">Teksty</a>
          <div class="dropdown-menu">
            <a href="ustawa-nr-5911.html" class="ustawa-link">
              Ustawa nr 5911
              <img src="images/exclamation-mark.svg" alt="!" width="18" height="18">
            </a>
            <a href="articles.html">Artykuły</a>
            <a href="inicjatywy.html">Inicjatywy</a>
          </div>
        </div>
        <a href="onas.html" style="background: rgba(0,0,0,0.1);">O nas</a>
        <a href="wsparcie.html" class="cta">Wsparcie</a>
    </nav>
    </div>
  </header>

  <!-- Mobile Menu -->
  <div class="mobile-menu" id="mobileMenu">
    <button class="mobile-menu-close" onclick="closeMobileMenu()" aria-label="Close menu">×</button>
    <a href="index.html" onclick="closeMobileMenu()">Strona główna</a>
    <a href="adopcje.html" onclick="closeMobileMenu()">Adopcje</a>
    <a href="#" onclick="closeMobileMenu()">Teksty</a>
    <div class="mobile-teksty-dropdown">
      <a href="ustawa-nr-5911.html" onclick="closeMobileMenu()" class="mobile-dropdown-item">Ustawa nr 5911</a>
      <a href="articles.html" onclick="closeMobileMenu()" class="mobile-dropdown-item">Artykuły</a>
      <a href="inicjatywy.html" onclick="closeMobileMenu()" class="mobile-dropdown-item">Inicjatywy</a>
    </div>
    <a href="onas.html" onclick="closeMobileMenu()">O nas</a>
    <a href="wsparcie.html" class="cta" onclick="closeMobileMenu()">Wsparcie</a>
  </div>

  <section id="home" class="hero">
    <div class="hero-content">
      <h1>O nas</h1>
    </div>
  </section>

  <main class="container">
    <!-- BIG CARD SECTION -->
    <section class="section overlap" id="about-us">
      <div class="big-card-container">
        <article class="big-card">
          <div class="big-card-image"></div>
          <div class="big-card-content">
            <h2 id="main-card-title">Nasza misja</h2>
            <p class="muted" id="main-card-content">Jesteśmy grupą kobiet - wolontariuszek, które założyły inicjatywę <strong>"Z Piekła do Domu"</strong> w marcu 2025 roku. Naszym celem jest ratowanie psów i kotów z trudnych, często śmiertelnych warunków panujących obecnie w Turcji. Na początku była nas garstka, ale projekt nabrał tempa i nadal rośnie w siłę. Dowiedziałyśmy się z mediów i od naszych tureckich znajomych o <a href="ustawa-nr-5911.html" class="ustawa-link" style="color: #000; text-decoration: none; display: inline-flex; align-items: center; gap: 4px;"><img src="images/exclamation-mark.svg" alt="!" style="width: 14px; height: 14px; vertical-align: middle;"><strong>ustawie nr 5911</strong> <span style="font-size: 0.65em;">(czytaj więcej)</span></a>, która została wdrożona w Turcji w 2024 roku. Ustawa ma na celu <strong>całkowitą eskterminacje psów bezdomnych w kraju</strong>. Nie zgadzamy się na takie okrucieństwo. Uważamy, że zwierzęta mają prawo żyć, i to godnie żyć. Szerzymy świadomość. Karmimy, leczymy psy i koty w Turcji, organizujemy transport do Polski i szukamy dobrych, odpowiedzialnych domów adopcyjnych dla naszych skrzywdzonych podopiecznych.</p>
            <a href="wsparcie.html" class="btn btn-primary" id="main-card-button" style="text-decoration: none;" onclick="window.location.href='wsparcie.html'; return true;">Wspomóż nas ↗</a>
          </div>
        </article>
      </div>
    </section>

    <!-- Facebook Page Widget Section -->
    <section class="section facebook-widget-section">
      <div class="container">
        <div class="social-widgets-container">
          <!-- Facebook Widget -->
          <div class="facebook-widget-container">
            <div class="facebook-widget-header">
              <h2>Śledź nas na Facebooku</h2>
              <p>Adopcje, newsy i wiele więcej!</p>
            </div>
            <a href="https://www.facebook.com/profile.php?id=61577219922888" target="_blank" class="fb-widget-link">
              <div class="fb-widget">
                <!-- Banner/Cover Image -->
                <div class="fb-cover-container">
                  <img src="images/fb-background.jpg" alt="Facebook cover" class="fb-cover-image">
                </div>
                
                <!-- Profile Section -->
                <div class="fb-profile-section">
                  <!-- Profile Picture -->
                  <div class="fb-profile-picture">
                    <img src="images/logo.svg" alt="Z Piekła do Domu Logo" class="fb-avatar">
                  </div>
                  
                  <!-- Page Info and Buttons -->
                  <div class="fb-info-section">
                    <div class="fb-page-name">
                      Z piekła do domu - Ratujemy psy i koty z Turcji
                    </div>
                    
                    <div class="fb-buttons">
                      <span class="fb-btn-like">
                        <img src="images/like-icon.svg" alt="Like" class="fb-btn-icon">
                        Lubię to
                      </span>
                      <span class="fb-btn-message">
                        <img src="images/messenger-icon.svg" alt="Message" class="fb-btn-icon">
                        Wyślij wiadomość
                      </span>
                    </div>
                    
                    <p class="fb-description-title">Prezentacja</p>
                    <p class="fb-description-text">Dla nas psy i koty nie mają narodowości. Ratujemy je z tureckich mordowni i dajemy im nowe życie. Nie uratujemy całego świata, ale możemy zmienić świat dla jednego psa.</p>
                    <div class="fb-info-lines">
                      <div class="fb-info-line">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="#8a8d91" class="fb-info-icon">
                          <path d="M10 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2h-8l-2-2z"/>
                        </svg>
                        <span class="fb-info-text"><strong>Strona</strong> · Zwierzęta</span>
                      </div>
                      <div class="fb-info-line">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="#8a8d91" class="fb-info-icon">
                          <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                        </svg>
                        <span class="fb-info-text">zpiekladodomu@gmail.com</span>
                      </div>
                      <div class="fb-info-line">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="#8a8d91" class="fb-info-icon fb-link-icon">
                          <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
                        </svg>
                        <span class="fb-info-text">zpiekladodomu.pl</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </a>
          </div>
          
          <!-- Instagram Widget -->
          <div class="instagram-widget-container">
            <div class="instagram-widget-header">
              <h2>Śledź nas na Instagramie</h2>
              <p>Ważne informacje, tureckie realia</p>
            </div>
            <a href="https://www.instagram.com/z_piekla_do_domu_/" target="_blank" class="insta-widget-link">
              <div class="insta-widget">
                <!-- Instagram Icons in Top Left Corner -->
                <img src="images/instagram.svg" alt="Instagram" class="insta-corner-icon">
                <img src="images/Instagram-logo.svg" alt="Instagram Logo" class="insta-corner-icon insta-logo-icon">
                
                <!-- Top Section: Profile Info -->
                <div class="insta-profile-column">
                  <div class="insta-profile">
                    <img src="images/logo.svg" 
                         alt="Z Piekła do Domu Logo" class="insta-avatar">
                    <div class="insta-info">
                      <div class="insta-username">
                        <span>z_piekla_do_domu_</span>
                      </div>
                      <p class="insta-description">Zwierzęta nie mają narodowości. Ratujemy psy i koty z Turcji, gdzie od 2.08.2024 maja prawdziwe piekło.</p>
                    </div>
                  </div>
                  <div class="insta-buttons">
                    <span class="insta-btn-follow">Follow</span>
                    <span class="insta-btn-message">Message</span>
                  </div>
                  <img src="images/stories.jpg" alt="Instagram stories" class="insta-stories-image">
                </div>
                
                <!-- Bottom Section: Video and Images -->
                <div class="insta-posts-row">
                  <div class="insta-post-preview">
                    <video src="images/puppies.mp4" class="insta-post-image" autoplay muted loop playsinline></video>
                  </div>
                  
                  <div class="insta-post-preview">
                    <img src="images/tvn.jpeg" alt="Instagram post" class="insta-post-image" loading="lazy">
                  </div>
                  
                  <div class="insta-post-preview">
                    <img src="images/insta-post3.jpg" alt="Instagram post" class="insta-post-image" loading="lazy">
                  </div>
                </div>
              </div>
            </a>
          </div>
          
          <!-- TikTok Widget -->
          <div class="tiktok-widget-container">
          <div class="tiktok-widget-header">
            <h2>Śledź nas na TikToku</h2>
            <p>Pomóz naszym zwierzakom polecieć w viral i nagłośnić co dzieje się w Turcji</p>
          </div>
          <div class="tiktok-widget-wrapper">
            <blockquote class="tiktok-embed" cite="https://www.tiktok.com/@zpiekladodomu1" data-unique-id="zpiekladodomu1" data-embed-type="creator" style="max-width: 600px; min-width: 288px;">
              <section>
                <a target="_blank" href="https://www.tiktok.com/@zpiekladodomu1?refer=creator_embed">@zpiekladodomu1</a>
              </section>
            </blockquote>
            <script async src="https://www.tiktok.com/embed.js"></script>
          </div>
        </div>
      </div>
    </section>

    <!-- INTERACTIVE MAP -->
    <section class="section map-section">
      <h3 id="map-title-new">Tu pomagamy</h3>
      <div class="map-container">
        <div class="map-wrapper">
          <!-- TEST: This should definitely be visible -->
          <p id="debug-info" style="color: #666; font-size: 14px; text-align: center; margin: 10px 0; display: none;">Interactive map loaded successfully</p>
          
             <!-- INTERACTIVE TURKEY MAP -->
             <div class="map-wrapper">
               <div id="turkeyMapContainer" style="width: 100%; height: auto; max-height: 500px; text-align: center; padding: 20px;">
                 <p style="color: #666; font-size: 16px;">Loading interactive map...</p>
               </div>
             </div>
        </div>
        
        <!-- Map info panel -->
        <div class="map-info" id="mapInfo">
          <div class="map-info-content">
            <h4 id="map-panel-title">Nasze osiągnięcia</h4>
            <p id="map-panel-description">Od początku naszej działalności udało nam się uratować setki zwierząt i znaleźć im nowe, kochające domy.</p>
            <div class="map-stats">
              <div class="stat-item">
                <span class="stat-number" id="stat1-number">500+</span>
                <span class="stat-label" id="stat1-label">Uratowanych zwierząt</span>
              </div>
              <div class="stat-item">
                <span class="stat-number" id="stat2-number">50+</span>
                <span class="stat-label" id="stat2-label">Szczęśliwych adopcji</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- MEDIA GALLERY -->
    <section class="section gallery-section">
      <div class="container">
        <div class="gallery-header">
          <h3>Nasze działania w obiektywie</h3>
          <p>Zobacz jak wygląda nasza codzienna praca na rzecz zwierząt</p>
        </div>
        
        <!-- Desktop Grid -->
        <div class="gallery-grid">
          <!-- Left column - Featured video card - spans 2 rows -->
          <div class="gallery-item featured video">
            <div class="facebook-video-embed left">
              <iframe src="https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fwatch%2F%3Fv%3D1109763807595155&show_text=false&width=400" 
                width="400" 
                height="700"
                style="border:none;overflow:hidden;width:100%;height:100%;" 
                scrolling="no" 
                frameborder="0" 
                allowfullscreen="true" 
                allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share" 
                allowFullScreen="true">
              </iframe>
            </div>
          </div>
          
          <!-- Middle column - First dog photo -->
          <div class="gallery-item facebook-photo">
            <div class="facebook-photo-container">
              <img src="images/dog-4.jpg" alt="Dog Photo" class="facebook-photo-img">
            </div>
          </div>
          
          <!-- Right column - Second featured video card - spans 2 rows -->
          <div class="gallery-item featured video">
            <div class="facebook-video-embed right">
              <iframe src="https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fzpiekladoddomu%2Fvideos%2F1356925742532079&show_text=false&width=400" 
                width="400" 
                height="700" 
                style="border:none;overflow:hidden;width:100%;height:100%;" 
                scrolling="no" 
                frameborder="0" 
                allowfullscreen="true" 
                allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share" 
                allowFullScreen="true">
              </iframe>
            </div>
          </div>
          
          <!-- Middle column - Second dog photo -->
          <div class="gallery-item facebook-photo">
            <div class="facebook-photo-container">
              <img src="images/dog-5.jpg" alt="Dog Photo" class="facebook-photo-img">
            </div>
          </div>
        </div>
        
        <!-- Mobile Carousel -->
        <div class="gallery-carousel" style="display: none;">
          <div class="carousel-container">
            <div class="carousel-track" id="unified-gallery-track">
              <!-- Gallery 1 Items -->
              <div class="carousel-item">
                <img src="images/dog-4.jpg" alt="Dog Photo">
              </div>
              <div class="carousel-item">
                <img src="images/dog-5.jpg" alt="Dog Photo">
              </div>
              
              <!-- Gallery 2 Items -->
              <div class="carousel-item">
                <img src="images/dog-7.jpg" alt="Dog 7">
              </div>
              <div class="carousel-item">
                <img src="images/dog-8.jpg" alt="Dog 8">
              </div>
              <div class="carousel-item">
                <img src="images/dog-6.jpg" alt="Dog 6">
              </div>
              
              <!-- Gallery 3 Items -->
              <div class="carousel-item">
                <img src="images/dog-10.jpg" alt="Dog 10">
              </div>
              <div class="carousel-item">
                <div class="sensitive-content" onclick="toggleSensitiveContent(this)">
                  <img src="images/dog-9.jpg" alt="Dog 9">
                  <div class="sensitive-overlay">
                    <div class="visibility-icon-container">
                      <div class="visibility-icon"></div>
                      <span class="sensitive-text">Click to view</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="carousel-item">
                <img src="images/dog-11.jpg" alt="Dog 11">
              </div>
              <div class="carousel-item">
                <img src="images/dog-12.jpg" alt="Dog 12">
              </div>
            </div>
            <div class="carousel-controls">
              <button class="carousel-btn" onclick="moveUnifiedCarousel(-1)">‹</button>
              <button class="carousel-btn" onclick="moveUnifiedCarousel(1)">›</button>
            </div>
            <div class="carousel-dots" id="unified-gallery-dots">
              <span class="carousel-dot active" onclick="goToUnifiedSlide(0)"></span>
              <span class="carousel-dot" onclick="goToUnifiedSlide(1)"></span>
              <span class="carousel-dot" onclick="goToUnifiedSlide(2)"></span>
              <span class="carousel-dot" onclick="goToUnifiedSlide(3)"></span>
              <span class="carousel-dot" onclick="goToUnifiedSlide(4)"></span>
              <span class="carousel-dot" onclick="goToUnifiedSlide(5)"></span>
              <span class="carousel-dot" onclick="goToUnifiedSlide(6)"></span>
              <span class="carousel-dot" onclick="goToUnifiedSlide(7)"></span>
              <span class="carousel-dot" onclick="goToUnifiedSlide(8)"></span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- MOBILE VIDEO SECTION -->
    <section class="mobile-video-section" style="display: none;">
      <div class="container">
        <div class="video-section-header">
          <h3>Nasze filmy</h3>
          <p>Zobacz nasze najnowsze działania w Turcji</p>
        </div>
        
        <div class="mobile-video-grid">
          <div class="mobile-video-item">
            <div class="facebook-video-embed">
              <iframe src="https://www.facebook.com/plugins/video.php?height=300&href=https%3A%2F%2Fwww.facebook.com%2Fwatch%2F%3Fv%3D1109763807595155&show_text=false&width=400" 
                width="400" 
                height="300" 
                style="border:none;overflow:hidden;width:100%;height:100%;" 
                scrolling="no" 
                frameborder="0" 
                allowfullscreen="true" 
                allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share" 
                allowFullScreen="true">
              </iframe>
            </div>
          </div>
          
          <div class="mobile-video-item">
            <div class="facebook-video-embed">
              <iframe src="https://www.facebook.com/plugins/video.php?height=300&href=https%3A%2F%2Fwww.facebook.com%2Fzpiekladoddomu%2Fvideos%2F1356925742532079&show_text=false&width=400" 
                width="400" 
                height="300" 
                style="border:none;overflow:hidden;width:100%;height:100%;" 
                scrolling="no" 
                frameborder="0" 
                allowfullscreen="true" 
                allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share" 
                allowFullScreen="true">
              </iframe>
            </div>
          </div>
          
          <div class="mobile-video-item">
            <div class="facebook-video-embed">
              <iframe src="https://www.facebook.com/plugins/video.php?height=300&href=https%3A%2F%2Fwww.facebook.com%2Fzpiekladoddomu%2Fvideos%2F1193461922687928&show_text=false&width=400" 
                width="400" 
                height="300" 
                style="border:none;overflow:hidden;width:100%;height:100%;" 
                scrolling="no" 
                frameborder="0" 
                allowfullscreen="true" 
                allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share" 
                allowFullScreen="true">
              </iframe>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ADDITIONAL CARDS - NO HEADER -->
    <section class="gallery-section-no-padding">
      <div class="container">
        <!-- Desktop Grid -->
        <div class="gallery-grid-three-cards">
          <!-- Left column - 2 cards stacked -->
          <div class="gallery-item image-card">
            <div class="image-container">
              <img src="images/dog-7.jpg" alt="Dog 7" class="gallery-image">
            </div>
          </div>
          
          <div class="gallery-item image-card">
            <div class="image-container">
              <img src="images/dog-8.jpg" alt="Dog 8" class="gallery-image">
            </div>
          </div>
          
          <!-- Right side - 1 big card -->
          <div class="gallery-item image-card big-card">
            <div class="image-container">
              <img src="images/dog-6.jpg" alt="Dog 6" class="gallery-image">
            </div>
          </div>
        </div>
        
      </div>
    </section>

    <!-- FINAL GALLERY SECTION - 5 CARDS -->
    <section class="gallery-section-no-padding final-gallery-section">
      <div class="container">
        <!-- Desktop Grid -->
        <div class="gallery-grid-five-cards">
          <!-- Left column - 1 smaller card (first row) -->
          <div class="gallery-item image-card">
            <div class="image-container" style="background-image: url('images/dog-10.jpg'); background-size: cover; background-repeat: no-repeat;">
              <img src="images/dog-10.jpg" alt="Dog 10" class="gallery-image" style="opacity: 0;">
            </div>
          </div>
          
          <!-- Right column - 1 smaller card (first row) -->
          <div class="gallery-item image-card sensitive-content" onclick="toggleSensitiveContent(this)">
            <div class="image-container" style="background-image: url('images/dog-9.jpg'); background-size: cover; background-repeat: no-repeat;">
              <img src="images/dog-9.jpg" alt="Dog 9" class="gallery-image" style="opacity: 0;">
            </div>
            <div class="sensitive-overlay">
              <div class="visibility-icon-container">
                <div class="visibility-icon"></div>
                <span class="sensitive-text">Click to view</span>
              </div>
            </div>
          </div>
          
          <!-- Middle column - 1 longer video card spanning 2 rows -->
          <div class="gallery-item video-card" onclick="openVideoModal('facebook4')">
            <div class="facebook-video-embed middle">
              <iframe src="https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fzpiekladoddomu%2Fvideos%2F1193461922687928&show_text=false&width=400" 
                width="400" 
                height="700" 
                style="border:none;overflow:hidden;width:100%;height:100%;" 
                scrolling="no" 
                frameborder="0" 
                allowfullscreen="true" 
                allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share" 
                allowFullScreen="true">
              </iframe>
            </div>
          </div>
          
          <!-- Left column - 1 smaller card (second row) -->
          <div class="gallery-item image-card">
            <div class="image-container" style="background-image: url('images/dog-11.jpg'); background-size: cover; background-repeat: no-repeat;">
              <img src="images/dog-11.jpg" alt="Dog 11" class="gallery-image" style="opacity: 0;">
            </div>
          </div>
          
          <!-- Right column - 1 smaller card (second row) -->
          <div class="gallery-item image-card">
            <div class="image-container" style="background-image: url('images/dog-12.jpg'); background-size: cover; background-repeat: no-repeat;">
              <img src="images/dog-12.jpg" alt="Dog 12" class="gallery-image" style="opacity: 0;">
            </div>
          </div>
        </div>
        
      </div>
    </section>

    <!-- SPACER BETWEEN GALLERY AND FOOTER -->
    <div class="gallery-footer-spacer" style="display: none;"></div>

    <!-- LIGHTBOX MODAL -->
    <div id="lightbox" class="lightbox-overlay" aria-hidden="true">
      <button class="lightbox-close" id="lightboxClose" aria-label="Zamknij">×</button>
      <button class="lightbox-nav lightbox-prev" id="lightboxPrev" aria-label="Poprzedni">
        <img src="images/arrow-left.svg" alt="Previous">
      </button>
      <div class="lightbox-content" id="lightboxContent"></div>
      <button class="lightbox-nav lightbox-next" id="lightboxNext" aria-label="Następny">
        <img src="images/arrow-right.svg" alt="Next">
      </button>
    </div>

  </main>

  <footer>
    <div class="container footer-grid">
      <div class="footer-main">
        <div class="footer-brand">
          <img src="images/logo.svg" alt="Logo" width="120" height="120">
          <div class="footer-content">
            <h2 class="footer-title">Z Piekła do Domu - ratujemy psy i koty z Turcji</h2>
            <div class="footer-email">
              <img src="images/email-icon.svg" alt="Email">
              <a href="mailto:zpiekladodomu@gmail.com">zpiekladodomu@gmail.com</a>
            </div>
          </div>
        </div>
      </div>
      <div class="footer-links">
        <div class="links-column">
          <h4>Linki</h4>
          <div class="links">
            <a href="https://www.facebook.com/profile.php?id=61577219922888" data-text="Fanpage">Fanpage</a>
            <a href="inicjatywy.html" data-text="Nasze inicjatywy">Nasze inicjatywy</a>
            <a href="https://www.facebook.com/groups/1483167953136280" data-text="Dołącz do grupy">Dołącz do grupy</a>
            <a href="#" data-text="Współpraca">Współpraca</a>
          </div>
        </div>
        <div class="links-column">
          <h4>Zobacz też</h4>
          <div class="links">
            <a href="#" data-text="Wioska Burçak">Wioska Burçak</a>
            <a href="#" data-text="Pani Adalet">Pani Adalet</a>
            <a href="articles.html" data-text="Artykuły">Artykuły</a>
            <a href="https://patronite.pl/zpiekladodomu" target="_blank" rel="noopener noreferrer" data-text="Zostań sponsorem">Zostań sponsorem</a>
          </div>
        </div>
      </div>
      <div class="footer-social">
        <div class="socials">
          <a href="https://www.tiktok.com/@zpiekladodomu1" aria-label="TikTok" target="_blank"><img src="images/tiktok-icon.svg" alt="TikTok" width="40" height="40"></a>
          <a href="https://www.instagram.com/z_piekla_do_domu_/" aria-label="Instagram" target="_blank"><img src="images/instagram.svg" alt="Instagram" width="40" height="40"></a>
          <a href="https://www.facebook.com/profile.php?id=61577219922888" aria-label="Facebook" target="_blank"><img src="images/facebook.svg" alt="Facebook" width="40" height="40"></a>
          <a href="https://x.com/zpiekladodomu" aria-label="X (Twitter)" target="_blank"><img src="images/x-logo.svg" alt="X" width="40" height="40"></a>
        </div>
        <div class="footer-copyright">
          <div>Z Piekła do domu 2025 ©</div>
          <div>Wszelkie prawa zastrzeżone</div>
        </div>
        <div class="footer-copyright">
          <div>©Logo autorstwa <b><a href="https://www.facebook.com/magdalena.marcinek.75">Magdaleny Marcinek</a></b></div>
        </div>
      </div>
    </div>
  </footer>

  <!-- Netlify Identity Widget -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <script>
    if (window.netlifyIdentity) {
      window.netlifyIdentity.on("init", user => {
        if (!user) {
          window.netlifyIdentity.on("login", () => {
            document.location.href = "/admin/";
          });
        }
      });
    }
    
    // Mobile Menu Functions
    function toggleMobileMenu() {
      const mobileMenu = document.getElementById('mobileMenu');
      const hamburgerLines = document.querySelectorAll('.hamburger-line');
      
      mobileMenu.classList.toggle('active');
      
      // Animate hamburger lines
      hamburgerLines.forEach((line, index) => {
        if (mobileMenu.classList.contains('active')) {
          if (index === 0) line.style.transform = 'rotate(45deg) translate(5px, 5px)';
          if (index === 1) line.style.opacity = '0';
          if (index === 2) line.style.transform = 'rotate(-45deg) translate(7px, -6px)';
        } else {
          line.style.transform = '';
          line.style.opacity = '';
        }
      });
      
      // Prevent body scroll when menu is open
      if (mobileMenu.classList.contains('active')) {
        document.body.style.overflow = 'hidden';
      } else {
        document.body.style.overflow = 'auto';
      }
    }

    function closeMobileMenu() {
      const mobileMenu = document.getElementById('mobileMenu');
      const hamburgerLines = document.querySelectorAll('.hamburger-line');
      
      mobileMenu.classList.remove('active');
      
      // Reset hamburger lines
      hamburgerLines.forEach(line => {
        line.style.transform = '';
        line.style.opacity = '';
      });
      
      document.body.style.overflow = 'auto';
    }

    // Close mobile menu when clicking outside
    document.addEventListener('click', function(event) {
      const mobileMenu = document.getElementById('mobileMenu');
      const toggle = document.querySelector('.mobile-menu-toggle');
      
      if (mobileMenu.classList.contains('active') && 
          !mobileMenu.contains(event.target) && 
          !toggle.contains(event.target)) {
        closeMobileMenu();
      }
    });

    // Close mobile menu on escape key
    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape') {
        closeMobileMenu();
      }
    });

    // Close mobile menu on window resize
    window.addEventListener('resize', function() {
      if (window.innerWidth > 900) {
        closeMobileMenu();
      }
    });
  </script>

  <!-- Lightbox JS for onas gallery -->
  <script>
    (function() {
      const overlay = document.getElementById('lightbox');
      const content = document.getElementById('lightboxContent');
      const btnPrev = document.getElementById('lightboxPrev');
      const btnNext = document.getElementById('lightboxNext');
      const btnClose = document.getElementById('lightboxClose');

      if (!overlay || !content) return;

      // Build items from both gallery grids
      const items = [];
      const imageCards = document.querySelectorAll('.gallery-item.image-card .image-container, .facebook-photo-container');
      imageCards.forEach(el => {
        // Prefer background-image
        let bg = (el.style && el.style.backgroundImage) || '';
        let src = '';
        if (bg && bg !== 'none') {
          const m = bg.match(/url\("?(.*?)"?\)/);
          if (m && m[1]) src = m[1];
        }
        if (!src) {
          const img = el.querySelector('img');
          if (img && img.getAttribute('src')) src = img.getAttribute('src');
        }
        if (src) items.push({ type: 'image', src });
      });

      const videoCards = document.querySelectorAll('.facebook-video-embed .fb-video');
      videoCards.forEach(el => {
        const href = el.getAttribute('data-href');
        if (href) items.push({ type: 'video', src: href });
      });

      if (!items.length) return;

      function fbEmbedUrl(href, w, h) {
        const enc = encodeURIComponent(href);
        return `https://www.facebook.com/plugins/video.php?href=${enc}&show_text=false&width=${w}&height=${h}`;
      }

      let index = 0;
      function render() {
        const it = items[index];
        content.innerHTML = '';
        if (!it) return;
        if (it.type === 'image') {
          content.classList.remove('video-active');
          const img = document.createElement('img');
          img.src = it.src;
          img.alt = 'Podgląd';
          content.appendChild(img);
        } else {
          content.classList.add('video-active');
          const w = Math.floor(Math.min(window.innerWidth * 0.9, 1100));
          const h = Math.floor(Math.min(window.innerHeight * 0.9, 800));
          content.style.width = w + 'px';
          content.style.height = h + 'px';
          const iframe = document.createElement('iframe');
          iframe.src = fbEmbedUrl(it.src, w, h);
          iframe.setAttribute('allowfullscreen', 'true');
          iframe.setAttribute('allow', 'autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share');
          content.appendChild(iframe);
        }
      }

      function openAt(i) {
        index = (i + items.length) % items.length;
        overlay.classList.add('show');
        overlay.setAttribute('aria-hidden', 'false');
        render();
      }

      function close() {
        overlay.classList.remove('show');
        overlay.setAttribute('aria-hidden', 'true');
        content.innerHTML = '';
      }

      btnPrev.addEventListener('click', () => { index = (index - 1 + items.length) % items.length; render(); });
      btnNext.addEventListener('click', () => { index = (index + 1) % items.length; render(); });
      btnClose.addEventListener('click', close);
      overlay.addEventListener('click', (e) => { if (e.target === overlay) close(); });
      document.addEventListener('keydown', (e) => {
        if (!overlay.classList.contains('show')) return;
        if (e.key === 'Escape') close();
        if (e.key === 'ArrowLeft') { index = (index - 1 + items.length) % items.length; render(); }
        if (e.key === 'ArrowRight') { index = (index + 1) % items.length; render(); }
      });

      // Attach click handlers to open
      const clickable = document.querySelectorAll('.gallery-item.image-card .image-container, .facebook-photo-container, .facebook-video-embed');
      clickable.forEach(node => {
        node.style.cursor = 'zoom-in';
        node.addEventListener('click', () => {
          // Find index from source
          let src = '';
          if (node.classList.contains('facebook-video-embed')) {
            const v = node.querySelector('.fb-video');
            src = v ? v.getAttribute('data-href') : '';
            const i = items.findIndex(it => it.type === 'video' && it.src === src);
            openAt(i >= 0 ? i : 0);
          } else {
            let bg = (node.style && node.style.backgroundImage) || '';
            if (bg && bg !== 'none') {
              const m = bg.match(/url\("?(.*?)"?\)/);
              if (m && m[1]) src = m[1];
            }
            if (!src) {
              const img = node.querySelector('img');
              if (img && img.getAttribute('src')) src = img.getAttribute('src');
            }
            const i = items.findIndex(it => it.type === 'image' && it.src === src);
            openAt(i >= 0 ? i : 0);
          }
        });
      });
    })();
  </script>

  <!-- CMS Content Loader - Disabled to use static content -->
  <!-- <script src="js/cms-content.js"></script> -->

  <!-- Video Modal -->
  <div id="videoModal" class="video-modal">
    <div class="video-modal-content">
      <button class="video-modal-close" onclick="closeVideoModal()">&times;</button>
      <video id="modalVideo" controls autoplay>
        <source src="" type="video/mp4">
        Twoja przeglądarka nie obsługuje odtwarzania wideo.
      </video>
    </div>
  </div>

  <script>
    // Interactive Map Enhancement
       function initializeInteractiveMap() {
         const mapContainer = document.getElementById('turkeyMapContainer');
         if (!mapContainer) {
           console.error('Map container not found!');
           return;
         }

         // Load the SVG file and embed it directly
         fetch('images/map-turkey.svg')
           .then(response => {
             if (!response.ok) {
               throw new Error(`HTTP error! status: ${response.status}`);
             }
             return response.text();
           })
           .then(svgText => {
             mapContainer.innerHTML = svgText;
             
             const svg = mapContainer.querySelector('svg');
             if (!svg) {
               console.error('SVG not found in loaded content');
               return;
             }

          // Style the SVG
          svg.style.width = '100%';
          svg.style.height = 'auto';
          svg.style.maxHeight = '500px';
          svg.style.display = 'block';
          svg.style.margin = '0 auto';

          // Add Istanbul pin - positioned at the northwest corner (European side)
          const istanbulPin = document.createElementNS('http://www.w3.org/2000/svg', 'image');
          istanbulPin.setAttribute('href', 'images/map-pin.svg');
          istanbulPin.setAttribute('x', '19%');  // Positioned in northwest (Istanbul location)
          istanbulPin.setAttribute('y', '13%');  // Slightly higher, near the Black Sea
          istanbulPin.setAttribute('width', '24');
          istanbulPin.setAttribute('height', '32');
          istanbulPin.setAttribute('class', 'istanbul-pin');
          istanbulPin.style.filter = 'drop-shadow(0 2px 4px rgba(0,0,0,0.3))';
          istanbulPin.style.transition = 'all 0.3s ease';
          
          // Create tooltip for Istanbul pin and add to map container
          const istanbulTooltip = document.createElement('div');
          istanbulTooltip.className = 'pin-tooltip istanbul-tooltip';
          istanbulTooltip.innerHTML = `
            <div class="pin-tooltip-header">Istanbul</div>
            <div class="pin-tooltip-description">To tutaj, na pograniczu Europy i Azji, pomagamy w działaniu prywatnego azylu we współpracy z jego właścicielem - <b>Ümitem.</b> W okolicy mieszka nasza wolontariuszka <b>Eliza</b>, która niezależnie od pogody i prywatnych wyzwań konsekwentnie pracuje w azylu pomagając zapewnić opiekę ok. 500 psiakom każdego dnia.</div>
          `;
          mapContainer.appendChild(istanbulTooltip);

          // Add hover effect for the pin with tooltip
          istanbulPin.addEventListener('mouseenter', function(e) {
            this.style.filter = 'drop-shadow(0 4px 8px rgba(220, 38, 38, 0.6))';
            
            // Position tooltip directly above the pin
            const svgRect = svg.getBoundingClientRect();
            const mapRect = mapContainer.getBoundingClientRect();
            
            // Calculate pin position relative to SVG (19% from left, 13% from top)
            const pinX = svgRect.left + (svgRect.width * 0.19);
            const pinY = svgRect.top + (svgRect.height * 0.13);
            
            // Position tooltip below the pin
            istanbulTooltip.style.left = (pinX - mapRect.left - (istanbulTooltip.offsetWidth / 2)) + 'px';
            istanbulTooltip.style.top = (pinY - mapRect.top + 40) + 'px';
            istanbulTooltip.style.position = 'absolute';
            istanbulTooltip.classList.add('show');
          });
          
          istanbulPin.addEventListener('mouseleave', function() {
            this.style.filter = 'drop-shadow(0 2px 4px rgba(0,0,0,0.3))';
            istanbulTooltip.classList.remove('show');
          });


          svg.appendChild(istanbulPin);

          // Add Ankara pin - positioned in the north-central part of Turkey
          const ankaraPin = document.createElementNS('http://www.w3.org/2000/svg', 'image');
          ankaraPin.setAttribute('href', 'images/map-pin.svg');
          ankaraPin.setAttribute('x', '36%');  // Positioned more to the left (Ankara location)
          ankaraPin.setAttribute('y', '32%');  // Slightly higher
          ankaraPin.setAttribute('width', '24');
          ankaraPin.setAttribute('height', '32');
          ankaraPin.setAttribute('class', 'ankara-pin');
          ankaraPin.style.filter = 'drop-shadow(0 2px 4px rgba(0,0,0,0.3))';
          ankaraPin.style.transition = 'all 0.3s ease';
          
          // Create tooltip for Ankara pin and add to map container
          const ankaraTooltip = document.createElement('div');
          ankaraTooltip.className = 'pin-tooltip istanbul-tooltip';
          ankaraTooltip.innerHTML = `
            <div class="pin-tooltip-header">Ankara</div>
            <div class="pin-tooltip-description">W stolicy Turcji leczymy psy w skrajnie drastycznych stanach. Obecnie przebywa tam 4 psiaki z ponosówkowymi zaburzeniami neurologicznymi, sunia po napaści na tle se*sualnym... Ważny ośrodek naszych działań, które koordynujemy z lokalną organizacją prozwierzęcą - <b>HayvanlarıKorumaKurtarmaHareketi.</b></div>
          `;
          mapContainer.appendChild(ankaraTooltip);
          console.log('Ankara tooltip created');

          // Add hover effect for the Ankara pin with tooltip
          ankaraPin.addEventListener('mouseenter', function(e) {
            this.style.filter = 'drop-shadow(0 4px 8px rgba(220, 38, 38, 0.6))';
            
            // Position tooltip directly above the pin
            const svgRect = svg.getBoundingClientRect();
            const mapRect = mapContainer.getBoundingClientRect();
            
            // Calculate pin position relative to SVG (36% from left, 32% from top)
            const pinX = svgRect.left + (svgRect.width * 0.36);
            const pinY = svgRect.top + (svgRect.height * 0.32);
            
            // Position tooltip below the pin (match index)
            ankaraTooltip.style.left = (pinX - mapRect.left - (ankaraTooltip.offsetWidth / 2)) + 'px';
            ankaraTooltip.style.top = (pinY - mapRect.top + 40) + 'px';
            ankaraTooltip.style.position = 'absolute';
            ankaraTooltip.classList.add('show');
          });
          
          ankaraPin.addEventListener('mouseleave', function() {
            this.style.filter = 'drop-shadow(0 2px 4px rgba(0,0,0,0.3))';
            ankaraTooltip.classList.remove('show');
          });


          svg.appendChild(ankaraPin);

          // Add Elazig pin - positioned in the eastern region of Turkey
          const elazigPin = document.createElementNS('http://www.w3.org/2000/svg', 'image');
          elazigPin.setAttribute('href', 'images/map-pin.svg');
          elazigPin.setAttribute('x', '72%');  // Positioned in eastern Turkey (Elazig location)
          elazigPin.setAttribute('y', '45%');  // Lower in the eastern region
          elazigPin.setAttribute('width', '24');
          elazigPin.setAttribute('height', '32');
          elazigPin.setAttribute('class', 'elazig-pin');
          elazigPin.style.filter = 'drop-shadow(0 2px 4px rgba(0,0,0,0.3))';
          elazigPin.style.transition = 'all 0.3s ease';
          
          // Create tooltip for Elazig pin and add to map container
          const elazigTooltip = document.createElement('div');
          elazigTooltip.className = 'pin-tooltip';
          elazigTooltip.innerHTML = `
            <div class="pin-tooltip-header">Elazığ</div>
            <div class="pin-tooltip-description">Wschód Turcji to miejsce, w którym nadzieja dla zwierząt zanika przytłoczona drastycznymi widokami setek ich tragedii. To tutaj, w Elazığ pomogliśmy w budowie azylu - <b>Wioska Burçak</b>, tzw. wyspy życia na morzu śmierci... <b>Burçak</b> to młoda studentka weterynarii tureckiego pochodzenia, która nie była obojętna na cierpienie zwierząt w jej rodzimym kraju.</div>
          `;
          mapContainer.appendChild(elazigTooltip);

          // Add hover effect for the Elazig pin with tooltip
          elazigPin.addEventListener('mouseenter', function(e) {
            this.style.filter = 'drop-shadow(0 4px 8px rgba(220, 38, 38, 0.6))';
            
            // Position tooltip directly above the pin
            const svgRect = svg.getBoundingClientRect();
            const mapRect = mapContainer.getBoundingClientRect();
            
            // Calculate pin position relative to SVG (72% from left, 45% from top)
            const pinX = svgRect.left + (svgRect.width * 0.72);
            const pinY = svgRect.top + (svgRect.height * 0.45);
            
            // Position tooltip above the pin
            elazigTooltip.style.left = (pinX - mapRect.left - (elazigTooltip.offsetWidth / 2)) + 'px';
            elazigTooltip.style.top = (pinY - mapRect.top - elazigTooltip.offsetHeight - 15) + 'px';
            elazigTooltip.style.position = 'absolute';
            elazigTooltip.classList.add('show');
          });
          
          elazigPin.addEventListener('mouseleave', function() {
            this.style.filter = 'drop-shadow(0 2px 4px rgba(0,0,0,0.3))';
            elazigTooltip.classList.remove('show');
          });

          svg.appendChild(elazigPin);

          // Add Mersin pin - positioned in the southern coastal region of Turkey
          const mersinPin = document.createElementNS('http://www.w3.org/2000/svg', 'image');
          mersinPin.setAttribute('href', 'images/map-pin.svg');
          mersinPin.setAttribute('x', '42%');  // Positioned in southern coastal region (Mersin location)
          mersinPin.setAttribute('y', '75%');  // Bottom of the country, coastal area
          mersinPin.setAttribute('width', '24');
          mersinPin.setAttribute('height', '32');
          mersinPin.setAttribute('class', 'mersin-pin');
          mersinPin.style.filter = 'drop-shadow(0 2px 4px rgba(0,0,0,0.3))';
          mersinPin.style.transition = 'all 0.3s ease';
          
          // Create tooltip for Mersin pin and add to map container
          const mersinTooltip = document.createElement('div');
          mersinTooltip.className = 'pin-tooltip';
          mersinTooltip.innerHTML = `
            <div class="pin-tooltip-header">Mersin</div>
            <div class="pin-tooltip-description">Tu pomagamy starszej kobiecie - <b>Adalet</b> w modernizacji i utrzymaniu jej mini azylu. Obecnie azyl mieści ok. 30 psiaków, koty i Adalet dba o nie na co dzień w pojedynkę. Przesyłamy karmę, budy, zbudowaliśmy jej nowe zadaszenie.<br> Mieszka tam również nasza wolontariuszka Sylwia z mężem, którzy odławiają, karmią i leczą zwierzęta w tym rejonie oraz pomagają w budowie infrastruktury takiej jak prywatne azyle. </div>
          `;
          mapContainer.appendChild(mersinTooltip);

          // Add hover effect for the Mersin pin with tooltip
          mersinPin.addEventListener('mouseenter', function(e) {
            this.style.filter = 'drop-shadow(0 4px 8px rgba(220, 38, 38, 0.6))';
            
            // Position tooltip directly above the pin
            const svgRect = svg.getBoundingClientRect();
            const mapRect = mapContainer.getBoundingClientRect();
            
            // Calculate pin position relative to SVG (42% from left, 75% from top)
            const pinX = svgRect.left + (svgRect.width * 0.42);
            const pinY = svgRect.top + (svgRect.height * 0.75);
            
            // Position tooltip above the pin
            mersinTooltip.style.left = (pinX - mapRect.left - (mersinTooltip.offsetWidth / 2)) + 'px';
            mersinTooltip.style.top = (pinY - mapRect.top - mersinTooltip.offsetHeight - 15) + 'px';
            mersinTooltip.style.position = 'absolute';
            mersinTooltip.classList.add('show');
          });
          
          mersinPin.addEventListener('mouseleave', function() {
            this.style.filter = 'drop-shadow(0 2px 4px rgba(0,0,0,0.3))';
            mersinTooltip.classList.remove('show');
          });

          svg.appendChild(mersinPin);

          // Add Tunceli pin - positioned slightly above Elazig in the eastern region
          const tunceliPin = document.createElementNS('http://www.w3.org/2000/svg', 'image');
          tunceliPin.setAttribute('href', 'images/map-pin.svg');
          tunceliPin.setAttribute('x', '72%');  // Same horizontal position as Elazig
          tunceliPin.setAttribute('y', '38%');  // Slightly above Elazig (which is at 45%)
          tunceliPin.setAttribute('width', '24');
          tunceliPin.setAttribute('height', '32');
          tunceliPin.setAttribute('class', 'tunceli-pin');
          tunceliPin.style.filter = 'drop-shadow(0 2px 4px rgba(0,0,0,0.3))';
          tunceliPin.style.transition = 'all 0.3s ease';
          
          // Create tooltip for Tunceli pin and add to map container
          const tunceliTooltip = document.createElement('div');
          tunceliTooltip.className = 'pin-tooltip';
          tunceliTooltip.innerHTML = `
            <div class="pin-tooltip-header">Tunceli</div>
            <div class="pin-tooltip-description">Ważny ośrodek naszych działań ratunkowych we wschodniej Turcji. Region o strategicznym znaczeniu w górzystym terenie.</div>
          `;
          mapContainer.appendChild(tunceliTooltip);

          // Add hover effect for the Tunceli pin with tooltip
          tunceliPin.addEventListener('mouseenter', function(e) {
            this.style.filter = 'drop-shadow(0 4px 8px rgba(220, 38, 38, 0.6))';
            
            // Position tooltip directly above the pin
            const svgRect = svg.getBoundingClientRect();
            const mapRect = mapContainer.getBoundingClientRect();
            
            // Calculate pin only to SVG (72% from left, 38% from top)
            const pinX = svgRect.left + (svgRect.width * 0.72);
            const pinY = svgRect.top + (svgRect.height * 0.38);
            
            // Position tooltip above the pin
            tunceliTooltip.style.left = (pinX - mapRect.left - (tunceliTooltip.offsetWidth / 2)) + 'px';
            tunceliTooltip.style.top = (pinY - mapRect.top - tunceliTooltip.offsetHeight - 15) + 'px';
            tunceliTooltip.style.position = 'absolute';
            tunceliTooltip.classList.add('show');
          });
          
          tunceliPin.addEventListener('mouseleave', function() {
            this.style.filter = 'drop-shadow(0 2px 4px rgba(0,0,0,0.3))';
            tunceliTooltip.classList.remove('show');
          });

          svg.appendChild(tunceliPin);

          const provinces = svg.querySelectorAll('path');
             console.log('Found', provinces.length, 'province elements');

             provinces.forEach(function(province) {
               // Set initial styles
               province.style.fill = '#E3C5AB';
               province.style.stroke = '#C59C79';
               province.style.strokeWidth = '1';
               province.style.transition = 'all 0.3s ease';

               const onEnter = function() {
                 this.style.fill = '#C59C79';
                 this.style.stroke = '#A67C52';
                 this.style.strokeWidth = '3';
                 this.style.filter = 'drop-shadow(0 4px 8px rgba(197, 156, 121, 0.5))';
                 console.log('Hovering over province');
               };

               const onLeave = function() {
                 if (!this.classList.contains('selected')) {
                   this.style.fill = '#E3C5AB';
                   this.style.stroke = '#C59C79';
                   this.style.strokeWidth = '1';
                   this.style.filter = 'none';
                 }
               };

               province.addEventListener('mouseenter', onEnter);
               province.addEventListener('mouseleave', onLeave);

             });
             console.log('Map initialized successfully with Istanbul and Ankara pins');
           })
           .catch(error => {
             console.error('Error loading SVG:', error);
             mapContainer.innerHTML = '<p style="color: red;">Error loading map. Please refresh the page.</p>';
           });
       }
    
    // Initialize the interactive map when page loads
    document.addEventListener('DOMContentLoaded', function() {
         console.log('Page loaded, initializing map...');
         const debugInfo = document.getElementById('debug-info');
         if (debugInfo) debugInfo.textContent = 'Loading interactive map...';
      
      initializeInteractiveMap();
    });

    function openVideoModal(videoSrc) {
      const modal = document.getElementById('videoModal');
      const video = document.getElementById('modalVideo');
      
      if (videoSrc === 'facebook') {
        // For Facebook video, we'll open it in a new tab
        try {
          const facebookUrl = 'https://www.facebook.com/61577219922888/videos/1109763807595155/';
          const newWindow = window.open(facebookUrl, '_blank');
          if (!newWindow) {
            // If popup was blocked, try alternative approach
            window.location.href = facebookUrl;
          }
        } catch (error) {
          console.error('Error opening Facebook video:', error);
          // Fallback: try to open the video in the same window
          window.location.href = 'https://www.facebook.com/61577219922888/videos/1109763807595155/';
        }
        return;
      }
      
      if (videoSrc === 'facebook2') {
        // For second Facebook video, we'll open it in a new tab
        try {
          const facebookUrl = 'https://www.facebook.com/zpiekladoddomu/videos/1356925742532079/';
          const newWindow = window.open(facebookUrl, '_blank');
          if (!newWindow) {
            // If popup was blocked, try alternative approach
            window.location.href = facebookUrl;
          }
        } catch (error) {
          console.error('Error opening Facebook video:', error);
          // Fallback: try to open the video in the same window
          window.location.href = 'https://www.facebook.com/zpiekladoddomu/videos/1356925742532079/';
        }
        return;
      }
      
      if (videoSrc === 'facebook3') {
        // For third Facebook video, we'll open it in a new tab
        try {
          const facebookUrl = 'https://www.facebook.com/61577219922888/videos/1109763807595155/';
          const newWindow = window.open(facebookUrl, '_blank');
          if (!newWindow) {
            // If popup was blocked, try alternative approach
            window.location.href = facebookUrl;
          }
        } catch (error) {
          console.error('Error opening Facebook video:', error);
          // Fallback: try to open the video in the same window
          window.location.href = 'https://www.facebook.com/61577219922888/videos/1109763807595155/';
        }
        return;
      }
      
      if (videoSrc === 'facebook4') {
        // For fourth Facebook video, we'll open it in a new tab
        try {
          const facebookUrl = 'https://www.facebook.com/watch/?v=24565340453125411';
          const newWindow = window.open(facebookUrl, '_blank');
          if (!newWindow) {
            // If popup was blocked, try alternative approach
            window.location.href = facebookUrl;
          }
        } catch (error) {
          console.error('Error opening Facebook video:', error);
          // Fallback: try to open the video in the same window
          window.location.href = 'https://www.facebook.com/watch/?v=24565340453125411';
        }
        return;
      }
      
      video.src = videoSrc;
      modal.classList.add('active');
      document.body.style.overflow = 'hidden'; // Prevent background scrolling
    }

    function openFacebookPhoto(photoUrl) {
      // Open Facebook photo in a new tab
      window.open(photoUrl, '_blank');
    }

    function closeVideoModal() {
      const modal = document.getElementById('videoModal');
      const video = document.getElementById('modalVideo');
      modal.classList.remove('active');
      video.pause();
      video.src = '';
      document.body.style.overflow = 'auto'; // Restore scrolling
    }

    function toggleSensitiveContent(element) {
      element.classList.toggle('revealed');
      // Also update overlay visibility to ensure it works
      const overlay = element.querySelector('.sensitive-overlay');
      if (overlay) {
        if (element.classList.contains('revealed')) {
          overlay.style.opacity = '0';
          overlay.style.pointerEvents = 'none';
        } else {
          overlay.style.opacity = '1';
          overlay.style.pointerEvents = 'auto';
        }
      }
    }

    // Close modal when clicking outside the video
    document.getElementById('videoModal').addEventListener('click', function(e) {
      if (e.target === this) {
        closeVideoModal();
      }
    });

    // Close modal with Escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeVideoModal();
      }
    });
    
    // Mobile Menu Functions
    function toggleMobileMenu() {
      const mobileMenu = document.getElementById('mobileMenu');
      const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
      
      mobileMenu.classList.toggle('active');
      mobileMenuToggle.classList.toggle('active');
    }
    
    function closeMobileMenu() {
      const mobileMenu = document.getElementById('mobileMenu');
      const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
      
      mobileMenu.classList.remove('active');
      mobileMenuToggle.classList.remove('active');
    }
    
    // Close mobile menu when clicking outside
    document.addEventListener('click', function(event) {
      const mobileMenu = document.getElementById('mobileMenu');
      const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
      
      if (mobileMenu.classList.contains('active') && 
          !mobileMenu.contains(event.target) && 
          !mobileMenuToggle.contains(event.target)) {
        closeMobileMenu();
      }
    });
    
    // Unified Carousel functionality
    const unifiedCarouselState = { currentSlide: 0, totalSlides: 9 };
    
    function moveUnifiedCarousel(direction) {
      const track = document.getElementById('unified-gallery-track');
      const dots = document.getElementById('unified-gallery-dots');
      
      if (!track) return;
      
      unifiedCarouselState.currentSlide += direction;
      
      // Handle wrap-around
      if (unifiedCarouselState.currentSlide < 0) {
        unifiedCarouselState.currentSlide = unifiedCarouselState.totalSlides - 1;
      } else if (unifiedCarouselState.currentSlide >= unifiedCarouselState.totalSlides) {
        unifiedCarouselState.currentSlide = 0;
      }
      
      // Move the track with proper calculation using translate3d for better performance
      const translateX = -(unifiedCarouselState.currentSlide * 100);
      track.style.transform = `translate3d(${translateX}%, 0, 0)`;
      
      // Update dots
      if (dots) {
        const dotElements = dots.querySelectorAll('.carousel-dot');
        dotElements.forEach((dot, index) => {
          dot.classList.toggle('active', index === unifiedCarouselState.currentSlide);
        });
      }
    }
    
    function goToUnifiedSlide(slideIndex) {
      const track = document.getElementById('unified-gallery-track');
      const dots = document.getElementById('unified-gallery-dots');
      
      if (!track) return;
      
      unifiedCarouselState.currentSlide = slideIndex;
      const translateX = -(unifiedCarouselState.currentSlide * 100);
      track.style.transform = `translate3d(${translateX}%, 0, 0)`;
      
      // Update dots
      if (dots) {
        const dotElements = dots.querySelectorAll('.carousel-dot');
        dotElements.forEach((dot, index) => {
          dot.classList.toggle('active', index === unifiedCarouselState.currentSlide);
        });
      }
    }
    
    // Initialize carousels on mobile
    function initializeCarousels() {
      if (window.innerWidth <= 1100) {
        // Show unified carousel and hide all grids
        const unifiedCarousel = document.querySelector('.gallery-carousel');
        if (unifiedCarousel) {
          unifiedCarousel.style.display = 'block';
          unifiedCarousel.style.visibility = 'visible';
        }
        
        // Show mobile video section
        const mobileVideoSection = document.querySelector('.mobile-video-section');
        if (mobileVideoSection) {
          mobileVideoSection.style.display = 'block';
          console.log('Mobile video section shown');
          
          // Videos now use direct iframes, no SDK parsing needed
          console.log('Videos loaded with direct iframes');
        }
        
        // Show gallery footer spacer
        const galleryFooterSpacer = document.querySelector('.gallery-footer-spacer');
        if (galleryFooterSpacer) {
          galleryFooterSpacer.style.display = 'block';
        }
        
        document.querySelectorAll('.gallery-grid, .gallery-grid-three-cards, .gallery-grid-five-cards').forEach(grid => {
          grid.style.display = 'none';
          grid.style.visibility = 'hidden';
        });
      } else {
        // Show grids and hide unified carousel
        const unifiedCarousel = document.querySelector('.gallery-carousel');
        if (unifiedCarousel) {
          unifiedCarousel.style.display = 'none';
          unifiedCarousel.style.visibility = 'hidden';
        }
        
        // Hide mobile video section
        const mobileVideoSection = document.querySelector('.mobile-video-section');
        if (mobileVideoSection) {
          mobileVideoSection.style.display = 'none';
        }
        
        // Hide gallery footer spacer
        const galleryFooterSpacer = document.querySelector('.gallery-footer-spacer');
        if (galleryFooterSpacer) {
          galleryFooterSpacer.style.display = 'none';
        }
        
        document.querySelectorAll('.gallery-grid, .gallery-grid-three-cards, .gallery-grid-five-cards').forEach(grid => {
          grid.style.display = 'grid';
          grid.style.visibility = 'visible';
        });
      }
    }
    
    // Initialize on load and resize
    document.addEventListener('DOMContentLoaded', initializeCarousels);
    window.addEventListener('resize', initializeCarousels);
    
    // Gallery Carousel System - Automatic Rotation
    // Define multiple sets of Facebook embeds and photos
    const galleryContentSets = {
      // First Gallery Section - Main gallery with embeds and photos
      mainGallery: {
        facebookEmbeds: [
          [
            'https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fwatch%2F%3Fv%3D1109763807595155&show_text=false&width=400',
            'https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fzpiekladoddomu%2Fvideos%2F1356925742532079&show_text=false&width=400'
          ],
          [
            'https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fzpiekladoddomu%2Fvideos%2F1193461922687928&show_text=false&width=400',
            'https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fzpiekladoddomu%2Fvideos%2F1356925742532079&show_text=false&width=400'
          ],
          [
            'https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fzpiekladoddomu%2Fvideos%2F1341984180267939&show_text=false&width=400',
            'https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fzpiekladoddomu%2Fvideos%2F852596487705627&show_text=false&width=400'
          ],
          [
            'https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fzpiekladoddomu%2Fvideos%2F812709404987959&show_text=false&width=400',
            'https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fzpiekladoddomu%2Fvideos%2F726883566427123&show_text=false&width=400'
          ],
          [
            'https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fzpiekladoddomu%2Fvideos%2F1327628602396359&show_text=false&width=400',
            'https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fwatch%2F%3Fv%3D1109763807595155&show_text=false&width=400'
          ],
          [
            'https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fzpiekladoddomu%2Fvideos%2F1326213212562724&show_text=false&width=400',
            'https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fzpiekladoddomu%2Fvideos%2F726883566427123&show_text=false&width=400'
          ]
        ],
        photos: [
          ['images/dog-4.jpg', 'images/dog-5.jpg'],
          ['images/dog-7.jpg', 'images/dog-8.jpg'],
          ['images/dog-10.jpg', 'images/dog-11.jpg'],
              ['images/bbb2.jpg', 'images/ustawa3.jpg'],
          ['images/patka3.jpg', 'images/piorun1.jpg'],
          ['images/tygrysek8.jpg', 'images/dog-15.jpg'],
          ['images/insta-post3.jpg', 'images/dog-16.jpg'],
          ['images/cat1.jpg', 'images/dog-17.jpg']
        ]
      },
      // Five-card gallery section
      fiveCardGallery: {
        facebookEmbed: [
          'https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fzpiekladoddomu%2Fvideos%2F1193461922687928&show_text=false&width=400',
          'https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fwatch%2F%3Fv%3D1109763807595155&show_text=false&width=400',
          'https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fzpiekladoddomu%2Fvideos%2F1356925742532079&show_text=false&width=400',
          'https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fzpiekladoddomu%2Fvideos%2F1341984180267939&show_text=false&width=400',
          'https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fzpiekladoddomu%2Fvideos%2F852596487705627&show_text=false&width=400',
          'https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fzpiekladoddomu%2Fvideos%2F812709404987959&show_text=false&width=400',
          'https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fzpiekladoddomu%2Fvideos%2F726883566427123&show_text=false&width=400',
          'https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fzpiekladoddomu%2Fvideos%2F1327628602396359&show_text=false&width=400',
          'https://www.facebook.com/plugins/video.php?height=700&href=https%3A%2F%2Fwww.facebook.com%2Fzpiekladoddomu%2Fvideos%2F1326213212562724&show_text=false&width=400'
        ],
        photos: [
          ['images/dog-10.jpg', 'images/dog-9.jpg', 'images/dog-11.jpg', 'images/dog-12.jpg'],
          ['images/dog-7.jpg', 'images/dog-8.jpg', 'images/dog-6.jpg', 'images/dog-4.jpg'],
          ['images/dog-5.jpg', 'images/dog-10.jpg', 'images/dog-11.jpg', 'images/dog-12.jpg'],
              ['images/bbb2.jpg', 'images/ustawa3.jpg', 'images/patka3.jpg', 'images/piorun1.jpg'],
          ['images/tygrysek8.jpg', 'images/dog-15.jpg', 'images/insta-post3.jpg', 'images/dog-16.jpg'],
          ['images/cat1.jpg', 'images/dog-17.jpg', 'images/dog-4.jpg', 'images/dog-5.jpg']
        ]
      }
    };
    
    let galleryCarouselIntervals = {};
    let currentlyDisplayedPhotos = new Set(); // Track currently displayed photos to avoid duplicates
    
    // All available photos pool (including dog-9.jpg for sensitive content card)
    const allPhotos = [
      'images/dog-4.jpg', 'images/dog-5.jpg', 'images/dog-6.jpg', 'images/dog-7.jpg',
      'images/dog-8.jpg', 'images/dog-9.jpg', 'images/dog-10.jpg', 'images/dog-11.jpg', 'images/dog-12.jpg',
        'images/bbb2.jpg', 'images/ustawa3.jpg', 'images/patka3.jpg', 'images/piorun1.jpg',
      'images/tygrysek8.jpg', 'images/dog-15.jpg', 'images/insta-post3.jpg', 'images/dog-16.jpg',
      'images/cat1.jpg', 'images/dog-17.jpg'
    ];
    
    // Shuffle array function
    function shuffleArray(array) {
      const shuffled = [...array];
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      return shuffled;
    }
    
    // Get unique photos that aren't currently displayed
    function getUniquePhotos(count, excludePhotos = []) {
      // Combine all exclusions: tracking set + explicit exclude list
      const allExcluded = new Set();
      currentlyDisplayedPhotos.forEach(photo => allExcluded.add(photo));
      excludePhotos.forEach(photo => allExcluded.add(photo));
      
      // Get all photos that aren't excluded
      const available = allPhotos.filter(photo => !allExcluded.has(photo));
      
      // If we don't have enough unique photos, shuffle all and try to minimize duplicates
      if (available.length < count) {
        // Shuffle all photos
        const shuffled = shuffleArray(allPhotos);
        // Try to get count photos, preferring non-excluded ones
        const result = [];
        const used = new Set();
        // First pass: add non-excluded photos
        for (const photo of shuffled) {
          if (result.length >= count) break;
          if (!allExcluded.has(photo) && !used.has(photo)) {
            result.push(photo);
            used.add(photo);
          }
        }
        // Second pass: add any photos if still needed (avoid duplicates within result)
        for (const photo of shuffled) {
          if (result.length >= count) break;
          if (!used.has(photo)) {
            result.push(photo);
            used.add(photo);
          }
        }
        return result;
      }
      
      // Return shuffled available photos
      return shuffleArray(available).slice(0, count);
    }
    
    // Helper function to get optimal positioning for each photo
    function getPhotoPosition(photoPath) {
      const positionMap = {
        'dog-4.jpg': '50%',      // Increased from 35%
        'dog-5.jpg': '55%',       // Increased from 40%
        'dog-6.jpg': '45%',       // Increased from 25%
        'dog-7.jpg': '50%',       // Increased from 30%
        'dog-8.jpg': '70%',       // Increased from 60%
        'dog-9.jpg': '55%',       // Increased from 40%
        'dog-10.jpg': '50%',      // Increased from 30%
        'dog-11.jpg': '80%',      // Increased from 75%
        'dog-12.jpg': '75%',      // Increased from 70%
        'tygrysek8.jpg': '75%',   // Increased from 70%
        'dog-15.jpg': '55%',      // Increased from 40%
        'dog-16.jpg': '50%',      // Increased from 35%
        'dog-17.jpg': '50%',      // Increased from 30%
        'bbb2.jpg': '70%',        // Increased from 60%
        'ustawa3.jpg': '70%',     // Increased from 60%
        'patka3.jpg': '55%',      // Increased from 40%
        'piorun1.jpg': '70%',     // Increased from 60%
        'insta-post3.jpg': '70%', // Increased from 60%
        'cat1.jpg': '55%'         // Increased from 40%
      };
      
      // Extract filename from path
      const filename = photoPath.split('/').pop();
      return positionMap[filename] || '50%'; // Default to 50% if not found (lowered from 30%)
    }
    
    // Helper function to apply positioning to a single image/container (global scope)
    // Accepts optional photoPathOverride to ensure correct photo is identified
    function applyPhotoPositioning(img, container, photoPathOverride = null) {
      if (!img && !container) return;
      
      // Use provided photo path if available, otherwise try to extract it
      let photoPath = photoPathOverride;
      
      // Get photo path from multiple sources if not provided - be thorough
      if (!photoPath) {
        // 1. Try img src (including full URL, relative path, or attribute)
        if (img) {
          const imgSrc = img.src || img.getAttribute('src') || img.getAttribute('data-src') || img.currentSrc || '';
          if (imgSrc) {
            // Extract filename from full URL or relative path
            const photoMatch = imgSrc.match(/images\/[^/]+\.(jpg|jpeg|png|gif|webp)/i) || imgSrc.match(/([^/]+\.(jpg|jpeg|png|gif|webp))/i);
            if (photoMatch) {
              // If full path found, use it; otherwise construct from filename
              photoPath = photoMatch[0].includes('images/') ? photoMatch[0] : 'images/' + photoMatch[1];
            }
          }
        }
        
        // 2. Try container background-image
        if (!photoPath && container) {
          const bgImage = container.style.backgroundImage || (window.getComputedStyle ? window.getComputedStyle(container).backgroundImage : '') || '';
          if (bgImage && bgImage !== 'none' && bgImage.includes('url(')) {
            const bgMatch = bgImage.match(/images\/[^/)]+\.(jpg|jpeg|png|gif|webp)/i);
            if (bgMatch) {
              photoPath = bgMatch[0];
            }
          }
        }
        
        // 3. Try finding img element inside container if we have container but no img
        if (!photoPath && container && !img) {
          const foundImg = container.querySelector('img');
          if (foundImg) {
            const imgSrc = foundImg.src || foundImg.getAttribute('src') || '';
            if (imgSrc) {
              const photoMatch = imgSrc.match(/images\/[^/]+\.(jpg|jpeg|png|gif|webp)/i) || imgSrc.match(/([^/]+\.(jpg|jpeg|png|gif|webp))/i);
              if (photoMatch) {
                photoPath = photoMatch[0].includes('images/') ? photoMatch[0] : 'images/' + photoMatch[1];
              }
            }
          }
        }
      }
      
      if (photoPath) {
        const position = getPhotoPosition(photoPath);
        
        // Store photo path as data attribute for CSS targeting
        if (container) {
          container.setAttribute('data-photo-src', photoPath);
        }
        if (img) {
          img.setAttribute('data-photo-src', photoPath);
        }
        
        // Check if img is hidden (opacity: 0) - if so, container background-image is what's visible
        let isImgVisible = true;
        if (img) {
          const imgOpacity = img.style.opacity || (window.getComputedStyle ? window.getComputedStyle(img).opacity : '1');
          isImgVisible = imgOpacity !== '0' && imgOpacity !== '0px';
        }
        
        // CRITICAL: Always set BOTH container background-position AND img object-position
        // Some cards use background-image (when img opacity: 0), others use the actual img
        
        // 1. Always set container background-position (works for background-image cards)
        if (container) {
          // Force set background-position - remove first then set
          container.style.setProperty('background-position', `center ${position}`, 'important');
          
          // Also update inline style attribute directly
          let currentStyle = container.getAttribute('style') || '';
          // Remove existing background-position declarations
          currentStyle = currentStyle.replace(/background-position\s*:\s*[^;]+;?/gi, '');
          currentStyle = currentStyle.trim();
          if (currentStyle && !currentStyle.endsWith(';')) {
            currentStyle += '; ';
          }
          currentStyle += `background-position: center ${position} !important;`;
          container.setAttribute('style', currentStyle);
          
          // Ensure background-size is set if there's a background-image
          const bgImageCheck = container.style.backgroundImage || (window.getComputedStyle ? window.getComputedStyle(container).backgroundImage : '') || '';
          if (bgImageCheck && bgImageCheck !== 'none') {
            container.style.setProperty('background-size', 'cover', 'important');
          }
        }
        
        // 2. Always set img object-position (works for visible img cards)
        if (img) {
          // Apply positioning with maximum priority - use helper function
          const applyImgPosition = () => {
            img.style.setProperty('object-fit', 'cover', 'important');
            img.style.setProperty('object-position', `center ${position}`, 'important');
            
            // Also update inline style attribute directly for maximum persistence
            let imgStyle = img.getAttribute('style') || '';
            // Remove ALL existing object-position declarations
            imgStyle = imgStyle.replace(/object-position\s*:\s*[^;!]+(!important)?;?/gi, '');
            imgStyle = imgStyle.trim();
            if (imgStyle && !imgStyle.endsWith(';')) {
              imgStyle += '; ';
            }
            imgStyle += `object-position: center ${position} !important;`;
            img.setAttribute('style', imgStyle);
          };
          
          // Apply immediately
          applyImgPosition();
          
          // Reapply after image loads to ensure it sticks
          if (!img.complete) {
            const loadHandler = function() {
              applyImgPosition();
              img.removeEventListener('load', loadHandler);
            };
            img.addEventListener('load', loadHandler);
          } else {
            // Image already loaded, reapply multiple times
            setTimeout(applyImgPosition, 10);
            setTimeout(applyImgPosition, 50);
            setTimeout(applyImgPosition, 150);
          }
        }
        
        // Update sensitive overlay if needed
        if (container) {
          updateSensitiveOverlay(container, photoPath);
        }
      }
    }
    
    // Helper function to add/remove sensitive overlay on video embeds
    function updateSensitiveVideoOverlay(container, videoUrl) {
      const sensitiveVideoId = '812709404987959';
      const isSensitiveVideo = videoUrl && videoUrl.includes(sensitiveVideoId);
      const galleryItem = container.closest('.gallery-item');
      
      if (!galleryItem) return;
      
      // Check if overlay already exists
      let overlay = galleryItem.querySelector('.sensitive-overlay');
      
      if (isSensitiveVideo) {
        // Need to show overlay - create if doesn't exist
        if (!overlay) {
          overlay = document.createElement('div');
          overlay.className = 'sensitive-overlay';
          overlay.innerHTML = `
            <div class="visibility-icon-container">
              <div class="visibility-icon"></div>
              <span class="sensitive-text">Click to view</span>
            </div>
          `;
          galleryItem.style.position = 'relative'; // Ensure positioning context
          galleryItem.appendChild(overlay);
          
          // Add click handler directly to overlay
          galleryItem.style.cursor = 'pointer';
          overlay.style.cursor = 'pointer';
          
          // Click handler on overlay - this will fire when clicking the overlay
          overlay.addEventListener('click', function(e) {
            e.stopPropagation(); // Prevent event bubbling
            toggleSensitiveContent(galleryItem);
          }, false);
          
          // Also handle clicks on galleryItem - preserve existing onclick if it exists
          const originalOnclick = galleryItem.onclick;
          // Store original onclick in dataset for restoration later
          if (originalOnclick && !galleryItem.dataset.originalOnclickStored) {
            galleryItem.dataset.originalOnclickStored = 'true';
            galleryItem.dataset.originalOnclick = originalOnclick.toString();
          }
          galleryItem.onclick = function(e) {
            // If overlay is visible and click is not on overlay, toggle
            if (overlay && overlay.style.display !== 'none' && overlay.style.opacity !== '0' && e.target !== overlay && !overlay.contains(e.target)) {
              toggleSensitiveContent(galleryItem);
            } else if (galleryItem.classList.contains('revealed') && originalOnclick) {
              // If revealed and has original handler, use it
              originalOnclick.call(this, e);
            }
          };
        }
        overlay.style.display = 'flex';
        overlay.style.opacity = '1';
        overlay.style.pointerEvents = 'auto';
      } else {
        // Hide overlay if it exists
        if (overlay) {
          overlay.style.display = 'none';
          overlay.style.opacity = '0';
          overlay.style.pointerEvents = 'none';
        }
        // Restore original onclick handler if it was stored
        if (galleryItem.dataset.originalOnclick) {
          // Restore cursor to default only if no other handler exists
          if (!galleryItem.onclick || galleryItem.onclick.toString().includes('toggleSensitiveContent')) {
            galleryItem.style.cursor = '';
          }
        } else {
          // If no original handler was stored, just clear cursor
          galleryItem.style.cursor = '';
        }
      }
    }
    
    // Helper function to add/remove sensitive overlay on any card
    function updateSensitiveOverlay(container, photoPath) {
      const sensitivePhotoPath = 'images/dog-9.jpg';
      // Find the gallery item - could be .gallery-item or parent of .facebook-photo-container
      let galleryItem = container.closest('.gallery-item');
      if (!galleryItem && container.classList.contains('facebook-photo-container')) {
        galleryItem = container.closest('.facebook-photo');
      }
      
      if (!galleryItem) return;
      
      // Check if overlay already exists
      let overlay = galleryItem.querySelector('.sensitive-overlay');
      const isSensitivePhoto = photoPath === sensitivePhotoPath;
      
      if (isSensitivePhoto) {
        // Need to show overlay - create if doesn't exist
        if (!overlay) {
          overlay = document.createElement('div');
          overlay.className = 'sensitive-overlay';
          overlay.innerHTML = `
            <div class="visibility-icon-container">
              <div class="visibility-icon"></div>
              <span class="sensitive-text">Click to view</span>
            </div>
          `;
          galleryItem.style.position = 'relative'; // Ensure positioning context
          galleryItem.appendChild(overlay);
          
          // Add click handler directly to overlay
          galleryItem.style.cursor = 'pointer';
          overlay.style.cursor = 'pointer';
          
          // Click handler on overlay - this will fire when clicking the overlay
          overlay.addEventListener('click', function(e) {
            e.stopPropagation(); // Prevent event bubbling
            toggleSensitiveContent(galleryItem);
          }, false);
          
          // Also handle clicks on galleryItem (for existing sensitive-content items)
          if (galleryItem.classList.contains('sensitive-content')) {
            const originalOnclick = galleryItem.onclick;
            galleryItem.onclick = function(e) {
              // If clicking directly on galleryItem and overlay is visible, toggle
              if (e.target === galleryItem || (overlay && overlay.style.opacity !== '0' && !overlay.contains(e.target))) {
                toggleSensitiveContent(galleryItem);
              } else if (originalOnclick) {
                originalOnclick.call(this, e);
              }
            };
          } else {
            // For dynamically added overlays
            galleryItem.onclick = function(e) {
              if (overlay && overlay.style.opacity !== '0' && e.target !== overlay && !overlay.contains(e.target)) {
                toggleSensitiveContent(galleryItem);
              }
            };
          }
        }
        overlay.style.display = 'flex';
        overlay.style.opacity = '1';
        overlay.style.pointerEvents = 'auto';
      } else {
        // Hide overlay if it exists
        if (overlay) {
          overlay.style.display = 'none';
          overlay.style.opacity = '0';
          overlay.style.pointerEvents = 'none';
        }
        // Remove click handler if not sensitive and not originally sensitive-content
        if (!galleryItem.classList.contains('sensitive-content')) {
          galleryItem.style.cursor = '';
          galleryItem.onclick = null;
        }
      }
    }
    
    // Function to get currently displayed photos from DOM
    function getCurrentlyDisplayedPhotos() {
      const displayed = new Set();
      const allImageContainers = document.querySelectorAll('.gallery-item .image-container img, .facebook-photo-container img');
      
      allImageContainers.forEach(img => {
        if (img && img.src) {
          const photoMatch = img.src.match(/images\/[^/]+\.(jpg|jpeg|png|gif|webp)/i);
          if (photoMatch) {
            displayed.add(photoMatch[0]);
          }
        }
      });
      
      // Also check background-images on containers
      const allContainers = document.querySelectorAll('.image-container, .facebook-photo-container');
      allContainers.forEach(container => {
        const bgImage = container.style.backgroundImage || (window.getComputedStyle ? window.getComputedStyle(container).backgroundImage : '');
        if (bgImage && bgImage !== 'none' && bgImage.includes('url(')) {
          const bgMatch = bgImage.match(/images\/[^/)]+\.(jpg|jpeg|png|gif|webp)/i);
          if (bgMatch) {
            displayed.add(bgMatch[0]);
          }
        }
      });
      
      return displayed;
    }
    
    function rotateGalleryContent() {
      // ATOMIC APPROACH: Select ALL new photos for ALL galleries at once
      // This guarantees no duplicates across galleries
      
      // Rebuild tracking from DOM to ensure we have accurate state
      const currentlyVisible = getCurrentlyDisplayedPhotos();
      currentlyDisplayedPhotos.clear();
      currentlyVisible.forEach(photo => {
        currentlyDisplayedPhotos.add(photo);
      });
      
      // Step 1: Collect all containers that need new photos
      const mainGallery = document.querySelector('.gallery-grid');
      const threeCardGallery = document.querySelector('.gallery-grid-three-cards');
      const fiveCardGallery = document.querySelector('.gallery-grid-five-cards');
      
      const containersToUpdate = [];
      const currentPhotosToReplace = [];
      
      // Main gallery photos (2 containers)
      if (mainGallery) {
        const photoContainers = mainGallery.querySelectorAll('.facebook-photo-container');
        photoContainers.forEach(container => {
          const img = container.querySelector('img');
          if (img) {
            // Get current photo from src or background
            const currentSrc = img.src || '';
            const photoMatch = currentSrc.match(/images\/[^/]+\.(jpg|jpeg|png|gif|webp)/i);
            if (photoMatch) {
              currentPhotosToReplace.push(photoMatch[0]);
            }
            containersToUpdate.push({ container: container, type: 'main', img: img });
          }
        });
      }
      
      // Three-card gallery (3 containers)
      if (threeCardGallery) {
        const photoContainers = threeCardGallery.querySelectorAll('.gallery-item.image-card .image-container');
        photoContainers.forEach(container => {
          const img = container.querySelector('img');
          if (container) {
            // Get current photo from img src or background-image
            let currentPhoto = null;
            if (img && img.src) {
              const photoMatch = img.src.match(/images\/[^/]+\.(jpg|jpeg|png|gif|webp)/i);
              if (photoMatch) currentPhoto = photoMatch[0];
            }
            if (!currentPhoto) {
              const bgImage = container.style.backgroundImage || (window.getComputedStyle ? window.getComputedStyle(container).backgroundImage : '');
              if (bgImage && bgImage.includes('url(')) {
                const bgMatch = bgImage.match(/images\/[^/)]+\.(jpg|jpeg|png|gif|webp)/i);
                if (bgMatch) currentPhoto = bgMatch[0];
              }
            }
            if (currentPhoto) {
              currentPhotosToReplace.push(currentPhoto);
            }
            containersToUpdate.push({ container: container, type: 'three', img: img });
          }
        });
      }
      
      // Five-card gallery (4 regular + 1 sensitive)
      if (fiveCardGallery) {
        const photoContainers = fiveCardGallery.querySelectorAll('.gallery-item.image-card .image-container');
        photoContainers.forEach(container => {
          const img = container.querySelector('img');
          const isSensitive = container.closest('.sensitive-content') !== null;
          if (container) {
            // Get current photo from img src or background-image
            let currentPhoto = null;
            if (img && img.src) {
              const photoMatch = img.src.match(/images\/[^/]+\.(jpg|jpeg|png|gif|webp)/i);
              if (photoMatch) currentPhoto = photoMatch[0];
            }
            if (!currentPhoto) {
              const bgImage = container.style.backgroundImage || (window.getComputedStyle ? window.getComputedStyle(container).backgroundImage : '');
              if (bgImage && bgImage.includes('url(')) {
                const bgMatch = bgImage.match(/images\/[^/)]+\.(jpg|jpeg|png|gif|webp)/i);
                if (bgMatch) currentPhoto = bgMatch[0];
              }
            }
            if (currentPhoto) {
              currentPhotosToReplace.push(currentPhoto);
            }
            containersToUpdate.push({ container: container, type: 'five', img: img, isSensitive: isSensitive });
          }
        });
      }
      
      // Step 2: Remove current photos from tracking so they can be replaced
      currentPhotosToReplace.forEach(photo => {
        currentlyDisplayedPhotos.delete(photo);
      });
      
      // Step 3: Select ALL new unique photos at once (guarantees no duplicates)
      const totalPhotosNeeded = containersToUpdate.length;
      
      // Build exclusion set: all currently displayed photos EXCEPT the ones we're replacing
      const excludeSet = new Set();
      currentlyDisplayedPhotos.forEach(photo => {
        if (!currentPhotosToReplace.includes(photo)) {
          excludeSet.add(photo);
        }
      });
      
      // Select unique photos: first from non-excluded, then fill remaining slots
      const selectedPhotos = [];
      const selectedSet = new Set();
      
      // Get all non-excluded photos
      const available = allPhotos.filter(photo => !excludeSet.has(photo));
      const shuffledAvailable = shuffleArray(available);
      
      // Select from available first (these are guaranteed unique)
      for (const photo of shuffledAvailable) {
        if (selectedPhotos.length >= totalPhotosNeeded) break;
        if (photo && !selectedSet.has(photo)) {
          selectedPhotos.push(photo);
          selectedSet.add(photo);
        }
      }
      
      // Fill remaining slots from all photos if needed (avoiding duplicates)
      if (selectedPhotos.length < totalPhotosNeeded) {
        const shuffledAll = shuffleArray(allPhotos);
        for (const photo of shuffledAll) {
          if (selectedPhotos.length >= totalPhotosNeeded) break;
          if (photo && !selectedSet.has(photo) && !excludeSet.has(photo)) {
            selectedPhotos.push(photo);
            selectedSet.add(photo);
          }
        }
      }
      
      // Final fallback: if still not enough, allow any unique photo
      if (selectedPhotos.length < totalPhotosNeeded) {
        for (const photo of allPhotos) {
          if (selectedPhotos.length >= totalPhotosNeeded) break;
          if (photo && !selectedSet.has(photo)) {
            selectedPhotos.push(photo);
            selectedSet.add(photo);
          }
        }
      }
      
      // Step 4: Apply photos to containers - FORCE ALL TO CHANGE
      // Update tracking AFTER photos are applied (in callback)
      let photoIndex = 0;
      containersToUpdate.forEach(({ container, img, isSensitive }) => {
        if (photoIndex < selectedPhotos.length && selectedPhotos[photoIndex] && container) {
          const newPhotoPath = selectedPhotos[photoIndex];
          
          // Ensure we have an img element (create if missing)
          let targetImg = img;
          if (!targetImg) {
            targetImg = document.createElement('img');
            targetImg.className = 'gallery-image';
            targetImg.alt = ''; // Empty alt to prevent text showing
            container.appendChild(targetImg);
          }
          
          // Hide alt text display - ensure image is set to display properly
          targetImg.style.display = 'block';
          
          // Fade out
          container.style.opacity = '0';
          
          setTimeout(() => {
            // Update img src
            targetImg.src = newPhotoPath;
            targetImg.style.opacity = '1'; // Make sure image is visible
            targetImg.style.display = 'block'; // Ensure it's displayed
            
            // Remove background-image if it exists
            container.style.backgroundImage = 'none';
            container.style.backgroundSize = '';
            container.style.backgroundPosition = '';
            
            // Apply positioning IMMEDIATELY with known photo path
            applyPhotoPositioning(targetImg, container, newPhotoPath);
            
            // Preload and fade in
            const tempImg = new Image();
            tempImg.onload = () => {
              // Ensure image is visible and displayed properly
              targetImg.style.opacity = '1';
              targetImg.style.display = 'block';
              container.style.opacity = '1';
              // Update tracking: add photo as displayed
              currentlyDisplayedPhotos.add(newPhotoPath);
              // CRITICAL: Reapply positioning after image loads with photo path to ensure consistency
              applyPhotoPositioning(targetImg, container, newPhotoPath);
              // Update sensitive overlay if needed
              if (isSensitive && newPhotoPath === 'images/dog-9.jpg') {
                updateSensitiveOverlay(container, newPhotoPath);
              }
              // Reapply positioning multiple times with photo path to ensure it sticks
              setTimeout(() => {
                applyPhotoPositioning(targetImg, container, newPhotoPath);
              }, 50);
              setTimeout(() => {
                applyPhotoPositioning(targetImg, container, newPhotoPath);
              }, 150);
              setTimeout(() => {
                applyPhotoPositioning(targetImg, container, newPhotoPath);
              }, 300);
              if (window.applyPositioningToAllImages) {
                setTimeout(window.applyPositioningToAllImages, 50);
              }
            };
            tempImg.onerror = () => {
              // If image fails to load, hide the image element to prevent alt text from showing
              targetImg.style.display = 'none';
              targetImg.style.opacity = '0';
              // Keep container visible but don't show broken image or alt text
              container.style.opacity = '1';
              // Restore background-image as fallback if available
              if (newPhotoPath) {
                container.style.backgroundImage = `url('${newPhotoPath}')`;
                container.style.backgroundSize = 'cover';
                container.style.backgroundRepeat = 'no-repeat';
              }
              currentlyDisplayedPhotos.add(newPhotoPath);
            };
            tempImg.src = newPhotoPath;
          }, 300);
          
          photoIndex++;
        } else if (photoIndex < selectedPhotos.length) {
          photoIndex++; // Skip if no container but advance index
        }
      });
      
      // Rotate embeds separately (they don't interfere with photo selection)
      if (mainGallery) {
        const embedContainers = mainGallery.querySelectorAll('.facebook-video-embed');
        if (embedContainers.length === 2) {
          rotateMainGalleryEmbeds(embedContainers);
        }
      }
      
      if (fiveCardGallery) {
        const embedContainer = fiveCardGallery.querySelector('.facebook-video-embed');
        if (embedContainer) {
          rotateFiveCardEmbed(embedContainer);
        }
      }
    }
    
    function rotateMainGalleryEmbeds(containers) {
      if (!galleryCarouselIntervals.mainEmbedsIndex) {
        galleryCarouselIntervals.mainEmbedsIndex = 0;
      }
      
      const currentSet = galleryContentSets.mainGallery.facebookEmbeds[galleryCarouselIntervals.mainEmbedsIndex];
      
      containers.forEach((container, index) => {
        if (currentSet[index]) {
          const iframe = container.querySelector('iframe');
          if (iframe) {
            const videoUrl = currentSet[index];
            // Fade out
            container.style.opacity = '0';
            setTimeout(() => {
              iframe.src = videoUrl;
              // Update sensitive overlay if needed
              updateSensitiveVideoOverlay(container, videoUrl);
              // Fade in
              container.style.opacity = '1';
            }, 300);
          }
        }
      });
      
      galleryCarouselIntervals.mainEmbedsIndex = (galleryCarouselIntervals.mainEmbedsIndex + 1) % galleryContentSets.mainGallery.facebookEmbeds.length;
    }
    
    function rotateMainGalleryPhotos(containers) {
      // Step 1: Get current photos and remove from tracking
      const currentPhotos = [];
      containers.forEach(container => {
        const img = container.querySelector('img');
        if (img && img.src) {
          const photoMatch = img.src.match(/images\/[^/]+\.(jpg|jpeg|png|gif|webp)/i);
          if (photoMatch) {
            const photoPath = photoMatch[0];
            currentPhotos.push(photoPath);
            currentlyDisplayedPhotos.delete(photoPath);
          }
        }
      });
      
      // Step 2: Select NEW unique photos (not in tracking, not current)
      const photoSet = getUniquePhotos(2, currentPhotos);
      
      // Step 3: Add new photos to tracking immediately
      photoSet.forEach(photo => {
        if (photo) {
          currentlyDisplayedPhotos.add(photo);
        }
      });
      
      // Step 4: Apply photos to containers
      containers.forEach((container, index) => {
        if (photoSet[index]) {
          const img = container.querySelector('img');
          if (img) {
            const newPhotoPath = photoSet[index];
            const currentSrc = img.src || '';
            const currentPhotoMatch = currentSrc.match(/images\/[^/]+\.(jpg|jpeg|png|gif|webp)/i);
            const currentPhoto = currentPhotoMatch ? currentPhotoMatch[0] : null;
            
            // Always apply the new photo - selection logic ensures it's different
            if (newPhotoPath) {
              container.style.opacity = '0';
              setTimeout(() => {
                img.src = newPhotoPath;
                applyPhotoPositioning(img, container);
                const tempImg = new Image();
                tempImg.onload = () => {
                  container.style.opacity = '1';
                  if (window.applyPositioningToAllImages) {
                    setTimeout(window.applyPositioningToAllImages, 50);
                  }
                };
                tempImg.src = newPhotoPath;
              }, 300);
            }
          }
        }
      });
    }
    
    function rotateFiveCardEmbed(container) {
      if (!galleryCarouselIntervals.fiveCardEmbedIndex) {
        galleryCarouselIntervals.fiveCardEmbedIndex = 0;
      }
      
      const currentSrc = galleryContentSets.fiveCardGallery.facebookEmbed[galleryCarouselIntervals.fiveCardEmbedIndex];
      const iframe = container.querySelector('iframe');
      
      if (iframe) {
        container.style.opacity = '0';
        setTimeout(() => {
          iframe.src = currentSrc;
          // Update sensitive overlay if needed
          updateSensitiveVideoOverlay(container, currentSrc);
          container.style.opacity = '1';
        }, 300);
      }
      
      galleryCarouselIntervals.fiveCardEmbedIndex = (galleryCarouselIntervals.fiveCardEmbedIndex + 1) % galleryContentSets.fiveCardGallery.facebookEmbed.length;
    }
    
    function rotateFiveCardPhotos(containers) {
      const allContainers = Array.from(containers);
      const sensitiveContainer = allContainers.find(c => c.closest('.sensitive-content'));
      const regularContainers = allContainers.filter(c => !c.closest('.sensitive-content'));
      
      const sensitivePhotoPath = 'images/dog-9.jpg';
      
      // Step 1: Get current photos and remove from tracking
      const currentPhotos = [];
      allContainers.forEach(container => {
        const img = container.querySelector('img');
        if (img && img.src) {
          const photoMatch = img.src.match(/images\/[^/]+\.(jpg|jpeg|png|gif|webp)/i);
          if (photoMatch) {
            const photoPath = photoMatch[0];
            if (!currentPhotos.includes(photoPath)) {
              currentPhotos.push(photoPath);
              currentlyDisplayedPhotos.delete(photoPath);
            }
          }
        }
      });
      
      // Step 2: Select 5 NEW unique photos (not in tracking, not current)
      let photoSet = getUniquePhotos(5, currentPhotos);
      
      // Ensure all photos in set are unique (no duplicates within set)
      const uniqueSet = [];
      const seen = new Set();
      for (const photo of photoSet) {
        if (photo && !seen.has(photo)) {
          uniqueSet.push(photo);
          seen.add(photo);
        }
      }
      // Fill remaining slots if needed
      while (uniqueSet.length < 5) {
        const additional = getUniquePhotos(1, [...currentPhotos, ...uniqueSet, ...Array.from(currentlyDisplayedPhotos)]);
        if (additional[0] && !seen.has(additional[0])) {
          uniqueSet.push(additional[0]);
          seen.add(additional[0]);
        } else {
          break;
        }
      }
      photoSet = uniqueSet.slice(0, 5);
      
      // Step 3: Add new photos to tracking immediately
      photoSet.forEach(photo => {
        if (photo) {
          currentlyDisplayedPhotos.add(photo);
        }
      });
      
      // Assign photos: first 4 to regular containers, last one to sensitive container
      const regularPhotoSet = photoSet.slice(0, 4);
      const sensitivePhoto = photoSet[4] || photoSet[0] || currentPhotos[0]; // Fallback chain
      
      // Update sensitive content card
      if (sensitiveContainer) {
        const sensitiveItem = sensitiveContainer.closest('.sensitive-content');
        const overlay = sensitiveItem ? sensitiveItem.querySelector('.sensitive-overlay') : null;
        const img = sensitiveContainer.querySelector('img');
        
        if (img && sensitiveItem) {
          const currentSrc = img.src || '';
          const currentPhotoMatch = currentSrc.match(/images\/[^/]+\.(jpg|jpeg|png|gif|webp)/i);
          const currentPhoto = currentPhotoMatch ? currentPhotoMatch[0] : null;
          
          // Always apply the new photo
          if (sensitivePhoto) {
            sensitiveContainer.style.opacity = '0';
            setTimeout(() => {
              img.src = sensitivePhoto;
              applyPhotoPositioning(img, sensitiveContainer);
              const tempImg = new Image();
              tempImg.onload = () => {
                sensitiveContainer.style.opacity = '1';
              };
              tempImg.src = sensitivePhoto;
            }, 300);
          }
        }
      }
      
      // Update regular photo containers
      regularContainers.forEach((container, index) => {
        if (regularPhotoSet[index]) {
          const img = container.querySelector('img');
          
          if (img) {
            const newSrc = regularPhotoSet[index];
            const currentSrc = img.src || '';
            const currentPhotoMatch = currentSrc.match(/images\/[^/]+\.(jpg|jpeg|png|gif|webp)/i);
            const currentPhoto = currentPhotoMatch ? currentPhotoMatch[0] : null;
            
            // Always apply the new photo
            if (newSrc) {
              container.style.opacity = '0';
              setTimeout(() => {
                img.src = newSrc;
                applyPhotoPositioning(img, container);
                const tempImg = new Image();
                tempImg.onload = () => {
                  container.style.opacity = '1';
                };
                tempImg.src = newSrc;
              }, 300);
            }
          }
        }
      });
    }
    
    function rotateThreeCardPhotos(containers) {
      // Step 1: Get current photos and remove from tracking
      const currentPhotos = [];
      containers.forEach(container => {
        const img = container.querySelector('img');
        if (img && img.src) {
          const photoMatch = img.src.match(/images\/[^/]+\.(jpg|jpeg|png|gif|webp)/i);
          if (photoMatch) {
            const photoPath = photoMatch[0];
            if (!currentPhotos.includes(photoPath)) {
              currentPhotos.push(photoPath);
              currentlyDisplayedPhotos.delete(photoPath);
            }
          }
        }
      });
      
      // Step 2: Select 3 NEW unique photos (not in tracking, not current)
      let photoSet = getUniquePhotos(3, currentPhotos);
      
      // Ensure all photos in set are unique (no duplicates within set)
      const uniqueSet = [];
      const seen = new Set();
      for (const photo of photoSet) {
        if (photo && !seen.has(photo)) {
          uniqueSet.push(photo);
          seen.add(photo);
        }
      }
      // Fill remaining slots if needed
      while (uniqueSet.length < 3) {
        const additional = getUniquePhotos(1, [...currentPhotos, ...uniqueSet, ...Array.from(currentlyDisplayedPhotos)]);
        if (additional[0] && !seen.has(additional[0])) {
          uniqueSet.push(additional[0]);
          seen.add(additional[0]);
        } else {
          break;
        }
      }
      photoSet = uniqueSet.slice(0, 3);
      
      // Step 3: Add new photos to tracking immediately
      photoSet.forEach(photo => {
        if (photo) {
          currentlyDisplayedPhotos.add(photo);
        }
      });
      
      // Step 4: Apply photos to containers
      containers.forEach((container, index) => {
        if (photoSet[index]) {
          const img = container.querySelector('img');
          if (img) {
            const newPhotoPath = photoSet[index];
            const currentSrc = img.src || '';
            const currentPhotoMatch = currentSrc.match(/images\/[^/]+\.(jpg|jpeg|png|gif|webp)/i);
            const currentPhoto = currentPhotoMatch ? currentPhotoMatch[0] : null;
            
            // Always apply the new photo
            if (newPhotoPath) {
              container.style.opacity = '0';
              setTimeout(() => {
                img.src = newPhotoPath;
                applyPhotoPositioning(img, container);
                const tempImg = new Image();
                tempImg.onload = () => {
                  container.style.opacity = '1';
                };
                tempImg.src = newPhotoPath;
              }, 300);
            }
          }
        }
      });
    }
    
    // Initialize carousel rotation on page load
    function initializeGalleryCarousel() {
      // Set initial transition styles for smooth carousel rotations
      if (!document.getElementById('gallery-carousel-transitions')) {
        const style = document.createElement('style');
        style.id = 'gallery-carousel-transitions';
        style.textContent = `
          .gallery-grid .facebook-video-embed,
          .gallery-grid .facebook-photo-container,
          .gallery-grid-three-cards .gallery-item.image-card .image-container,
          .gallery-grid-five-cards .gallery-item.image-card .image-container,
          .gallery-grid-five-cards .facebook-video-embed {
            transition: opacity 0.5s ease-in-out !important;
          }
        `;
        document.head.appendChild(style);
      }
      
      // Initialize click handlers for existing sensitive-content overlays in HTML
      const existingSensitiveContent = document.querySelectorAll('.sensitive-content');
      existingSensitiveContent.forEach(element => {
        const overlay = element.querySelector('.sensitive-overlay');
        if (overlay && !overlay.dataset.clickHandlerAdded) {
          overlay.dataset.clickHandlerAdded = 'true';
          overlay.style.cursor = 'pointer';
          overlay.addEventListener('click', function(e) {
            e.stopPropagation();
            toggleSensitiveContent(element);
          }, false);
        }
      });
      
      // Initialize sensitive overlay visibility and positioning based on initial photos in all cards
      // Apply positioning to ALL images in the gallery, including those in HTML initially
      const allImages = document.querySelectorAll('.gallery-item img, .facebook-photo-container img, .image-container img, .gallery-image, .facebook-photo-img');
      allImages.forEach(img => {
        const container = img.closest('.image-container, .facebook-photo-container, .gallery-item');
        applyPhotoPositioning(img, container);
      });
      
      // Also apply positioning to containers that only have background-image (no img tag)
      const allContainers = document.querySelectorAll('.image-container, .facebook-photo-container');
      allContainers.forEach(container => {
        const bgImage = container.style.backgroundImage || window.getComputedStyle(container).backgroundImage;
        if (bgImage && bgImage !== 'none') {
          const img = container.querySelector('img');
          // If no img or img has opacity 0 (background-image is being used), apply positioning to container
          if (!img || (img && window.getComputedStyle(img).opacity === '0')) {
            applyPhotoPositioning(img, container);
          }
        }
      });
      
      // Initialize sensitive overlay visibility for video embeds
      const allVideoContainers = document.querySelectorAll('.facebook-video-embed');
      allVideoContainers.forEach(container => {
        const iframe = container.querySelector('iframe');
        if (iframe) {
          const videoSrc = iframe.src || iframe.getAttribute('src') || '';
          if (videoSrc) {
            updateSensitiveVideoOverlay(container, videoSrc);
          }
        }
      });
      
      // Make function globally accessible
      window.applyPositioningToAllImages = function applyPositioningToAllImages() {
        // Get all containers that might have images
        const allContainers = document.querySelectorAll('.image-container, .facebook-photo-container, .gallery-item.image-card, .gallery-item.facebook-photo');
        
        allContainers.forEach(container => {
          // Get the img element inside
          const img = container.querySelector('img');
          
          // Get background-image from container
          const computedStyle = window.getComputedStyle(container);
          const bgImage = container.style.backgroundImage || computedStyle.backgroundImage;
          
          // Determine photo path - prioritize background-image since that's often what's visible
          let photoPath = null;
          
          if (bgImage && bgImage !== 'none' && bgImage.includes('url(')) {
            const bgMatch = bgImage.match(/images\/[^/)]+\.(jpg|jpeg|png|gif|webp)/i);
            if (bgMatch) photoPath = bgMatch[0];
          }
          
          // Fallback to img src if background-image didn't work
          if (!photoPath && img) {
            const imgSrc = img.src || img.getAttribute('src') || '';
            const imgMatch = imgSrc.match(/images\/[^/]+\.(jpg|jpeg|png|gif|webp)/i);
            if (imgMatch) photoPath = imgMatch[0];
          }
          
          // Apply positioning if we found a photo path
          if (photoPath) {
            const position = getPhotoPosition(photoPath);
            
            // ALWAYS set container background-position (critical for background-image cards)
            container.style.setProperty('background-position', `center ${position}`, 'important');
            
            // Also set in inline style attribute for maximum persistence
            let inlineStyle = container.getAttribute('style') || '';
            inlineStyle = inlineStyle.replace(/background-position\s*:\s*[^;]+;?/gi, '').trim();
            if (inlineStyle && !inlineStyle.endsWith(';')) inlineStyle += '; ';
            inlineStyle += `background-position: center ${position} !important;`;
            container.setAttribute('style', inlineStyle);
            
            // ALWAYS set img object-position (for visible img cards)
            if (img) {
              img.style.setProperty('object-position', `center ${position}`, 'important');
              
              // Also set in inline style attribute
              let imgInlineStyle = img.getAttribute('style') || '';
              imgInlineStyle = imgInlineStyle.replace(/object-position\s*:\s*[^;]+;?/gi, '').trim();
              if (imgInlineStyle && !imgInlineStyle.endsWith(';')) imgInlineStyle += '; ';
              imgInlineStyle += `object-position: center ${position} !important;`;
              img.setAttribute('style', imgInlineStyle);
            }
          }
        });
      }
      
      // Apply positioning multiple times to catch all images
      setTimeout(applyPositioningToAllImages, 50);
      setTimeout(applyPositioningToAllImages, 200);
      setTimeout(applyPositioningToAllImages, 500);
      setTimeout(applyPositioningToAllImages, 1000);
      setTimeout(applyPositioningToAllImages, 2000);
      
      // Also run continuously every second for the first 10 seconds
      let continuousCount = 0;
      const continuousInterval = setInterval(() => {
        applyPositioningToAllImages();
        continuousCount++;
        if (continuousCount >= 10) {
          clearInterval(continuousInterval);
        }
      }, 1000);
      
      // Use MutationObserver to catch dynamically added images
      const observer = new MutationObserver(function(mutations) {
        let shouldReapply = false;
        mutations.forEach(function(mutation) {
          if (mutation.type === 'childList' || mutation.type === 'attributes') {
            shouldReapply = true;
          }
        });
        if (shouldReapply) {
          setTimeout(applyPositioningToAllImages, 50);
        }
      });
      
      // Observe all gallery containers for changes
      const galleryContainers = document.querySelectorAll('.gallery-grid, .gallery-grid-three-cards, .gallery-grid-five-cards');
      galleryContainers.forEach(container => {
        observer.observe(container, {
          childList: true,
          subtree: true,
          attributes: true,
          attributeFilter: ['src', 'style']
        });
      });
      
      // Also observe image load events
      document.addEventListener('load', function(e) {
        if (e.target.tagName === 'IMG' && e.target.closest('.gallery-item, .facebook-photo-container, .image-container')) {
          const container = e.target.closest('.image-container, .facebook-photo-container, .gallery-item');
          applyPhotoPositioning(e.target, container);
        }
      }, true);
      
      // Enhanced rotate function that applies positioning after rotation
      const originalRotateGalleryContent = rotateGalleryContent;
      rotateGalleryContent = function() {
        originalRotateGalleryContent();
        // Apply positioning after rotation completes
        setTimeout(applyPositioningToAllImages, 350);
        setTimeout(applyPositioningToAllImages, 700);
      };
      
      // Start rotating every 6 seconds
      setInterval(rotateGalleryContent, 6000);
      
      // Initial rotation after 6 seconds
      setTimeout(rotateGalleryContent, 6000);
    }
    
    // Start carousel when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializeGalleryCarousel);
    } else {
      initializeGalleryCarousel();
    }
  </script>

  <!-- Instagram Embed Script -->
  <script async src="//www.instagram.com/embed.js"></script>
  <script src="/js/analytics.js"></script>

</body>
</html>
